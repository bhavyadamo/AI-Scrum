{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"../../../services/settings.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction AzureDevOpsSettingsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AzureDevOpsSettingsComponent_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.error = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AzureDevOpsSettingsComponent_div_6_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.success = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.success, \" \");\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"span\", 14);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵtext(2, \" You do not have permission to view Azure DevOps settings. Contact an administrator. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_6_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Organization URL is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_6_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Enter a valid Azure DevOps URL\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtemplate(1, AzureDevOpsSettingsComponent_div_9_div_6_small_1_Template, 2, 0, \"small\", 8);\n    i0.ɵɵtemplate(2, AzureDevOpsSettingsComponent_div_9_div_6_small_2_Template, 2, 0, \"small\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r10.azureDevOpsForm.get(\"organizationUrl\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r10.azureDevOpsForm.get(\"organizationUrl\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"pattern\"]);\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_16_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Personal Access Token is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_16_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Token must be at least 20 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtemplate(1, AzureDevOpsSettingsComponent_div_9_div_16_small_1_Template, 2, 0, \"small\", 8);\n    i0.ɵɵtemplate(2, AzureDevOpsSettingsComponent_div_9_div_16_small_2_Template, 2, 0, \"small\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r11.azureDevOpsForm.get(\"personalAccessToken\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r11.azureDevOpsForm.get(\"personalAccessToken\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_26_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Project name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtemplate(1, AzureDevOpsSettingsComponent_div_9_div_26_small_1_Template, 2, 0, \"small\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r12.azureDevOpsForm.get(\"projectName\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 17);\n    i0.ɵɵlistener(\"ngSubmit\", function AzureDevOpsSettingsComponent_div_9_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.saveAzureDevOpsSettings());\n    });\n    i0.ɵɵelementStart(2, \"div\", 18)(3, \"label\", 19);\n    i0.ɵɵtext(4, \"Organization URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 20);\n    i0.ɵɵtemplate(6, AzureDevOpsSettingsComponent_div_9_div_6_Template, 3, 2, \"div\", 21);\n    i0.ɵɵelementStart(7, \"small\", 22);\n    i0.ɵɵtext(8, \" Example: https://dev.azure.com/your-organization \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 18)(10, \"label\", 23);\n    i0.ɵɵtext(11, \"Personal Access Token (PAT)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 24);\n    i0.ɵɵelement(13, \"input\", 25);\n    i0.ɵɵelementStart(14, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function AzureDevOpsSettingsComponent_div_9_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.togglePatVisibility());\n    });\n    i0.ɵɵelement(15, \"i\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, AzureDevOpsSettingsComponent_div_9_div_16_Template, 3, 2, \"div\", 21);\n    i0.ɵɵelementStart(17, \"small\", 22);\n    i0.ɵɵelement(18, \"i\", 28);\n    i0.ɵɵtext(19, \" The PAT is used to authenticate with Azure DevOps. \");\n    i0.ɵɵelementStart(20, \"a\", 29);\n    i0.ɵɵtext(21, \" Learn more \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 18)(23, \"label\", 30);\n    i0.ɵɵtext(24, \"Project Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"input\", 31);\n    i0.ɵɵtemplate(26, AzureDevOpsSettingsComponent_div_9_div_26_Template, 2, 1, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 32)(28, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function AzureDevOpsSettingsComponent_div_9_Template_button_click_28_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.testConnection());\n    });\n    i0.ɵɵelement(29, \"i\", 34);\n    i0.ɵɵtext(30, \" Test Connection \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 35);\n    i0.ɵɵelement(32, \"i\", 36);\n    i0.ɵɵtext(33, \" Save DevOps Settings \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    let tmp_4_0;\n    let tmp_5_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.azureDevOpsForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r4.azureDevOpsForm.get(\"organizationUrl\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx_r4.azureDevOpsForm.get(\"organizationUrl\")) == null ? null : tmp_1_0.touched));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"type\", ctx_r4.showPat ? \"text\" : \"password\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r4.showPat ? \"bi-eye-slash\" : \"bi-eye\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r4.azureDevOpsForm.get(\"personalAccessToken\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r4.azureDevOpsForm.get(\"personalAccessToken\")) == null ? null : tmp_4_0.touched));\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx_r4.azureDevOpsForm.get(\"projectName\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx_r4.azureDevOpsForm.get(\"projectName\")) == null ? null : tmp_5_0.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.azureDevOpsForm.invalid || ctx_r4.loading);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.azureDevOpsForm.invalid || ctx_r4.loading);\n  }\n}\nfunction AzureDevOpsSettingsComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 38)(2, \"h6\", 39);\n    i0.ɵɵtext(3, \"Current Settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 40)(5, \"div\", 41)(6, \"div\", 42)(7, \"label\", 43);\n    i0.ɵɵtext(8, \"Organization\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 41)(11, \"div\", 42)(12, \"label\", 43);\n    i0.ɵɵtext(13, \"Project\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 45)(16, \"div\", 42)(17, \"label\", 43);\n    i0.ɵɵtext(18, \"Personal Access Token\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 24);\n    i0.ɵɵelement(20, \"input\", 46);\n    i0.ɵɵelementStart(21, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function AzureDevOpsSettingsComponent_div_10_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.togglePatVisibility());\n    });\n    i0.ɵɵelement(22, \"i\", 27);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"value\", ctx_r5.settings.organization);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"value\", ctx_r5.settings.project);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"type\", ctx_r5.showPat ? \"text\" : \"password\")(\"value\", ctx_r5.settings.personalAccessToken);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r5.showPat ? \"bi-eye-slash\" : \"bi-eye\");\n  }\n}\nexport class AzureDevOpsSettingsComponent {\n  constructor(authService, settingsService, fb) {\n    this.authService = authService;\n    this.settingsService = settingsService;\n    this.fb = fb;\n    this.settings = null;\n    this.loading = false;\n    this.error = '';\n    this.success = '';\n    this.showPat = false;\n    this.patForm = this.fb.group({\n      personalAccessToken: ['', [Validators.required, Validators.minLength(20)]]\n    });\n  }\n  ngOnInit() {\n    this.loadSettings();\n  }\n  loadSettings() {\n    if (!this.authService.canViewAzureDevOpsPat()) {\n      this.error = 'You do not have permission to view Azure DevOps settings';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n    this.settingsService.getAzureDevOpsSettings().subscribe({\n      next: settings => {\n        this.settings = settings;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = err.message || 'Failed to load Azure DevOps settings';\n        this.loading = false;\n      }\n    });\n  }\n  updatePat() {\n    if (!this.authService.canEditAzureDevOpsPat()) {\n      this.error = 'You do not have permission to update Azure DevOps PAT';\n      return;\n    }\n    if (this.patForm.invalid) {\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n    const request = {\n      personalAccessToken: this.patForm.value.personalAccessToken\n    };\n    this.settingsService.updateAzureDevOpsPAT(request).subscribe({\n      next: () => {\n        this.success = 'Azure DevOps Personal Access Token updated successfully';\n        this.loading = false;\n        this.loadSettings(); // Reload to get the masked version\n        this.patForm.reset();\n      },\n      error: err => {\n        this.error = err.message || 'Failed to update Azure DevOps PAT';\n        this.loading = false;\n      }\n    });\n  }\n  togglePatVisibility() {\n    this.showPat = !this.showPat;\n  }\n  static {\n    this.ɵfac = function AzureDevOpsSettingsComponent_Factory(t) {\n      return new (t || AzureDevOpsSettingsComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AzureDevOpsSettingsComponent,\n      selectors: [[\"app-azure-devops-settings\"]],\n      decls: 11,\n      vars: 6,\n      consts: [[1, \"card\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"alert alert-danger alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-success alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center mb-3\", 4, \"ngIf\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"alert-dismissible\", \"fade\", \"show\"], [1, \"d-flex\", \"justify-content-center\", \"mb-3\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"alert\", \"alert-warning\"], [1, \"bi\", \"bi-lock-fill\", \"me-2\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"organizationUrl\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"organizationUrl\", \"formControlName\", \"organizationUrl\", \"placeholder\", \"https://dev.azure.com/your-organization\", 1, \"form-control\"], [\"class\", \"text-danger mt-1\", 4, \"ngIf\"], [1, \"form-text\", \"text-muted\"], [\"for\", \"personalAccessToken\", 1, \"form-label\"], [1, \"input-group\"], [\"id\", \"personalAccessToken\", \"formControlName\", \"personalAccessToken\", \"placeholder\", \"Enter your Personal Access Token\", 1, \"form-control\", 3, \"type\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"bi\", 3, \"ngClass\"], [1, \"bi\", \"bi-info-circle\"], [\"href\", \"https://learn.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate\", \"target\", \"_blank\"], [\"for\", \"projectName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"projectName\", \"formControlName\", \"projectName\", \"placeholder\", \"Your Azure DevOps project name\", 1, \"form-control\"], [1, \"d-flex\", \"gap-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"bi\", \"bi-lightning-charge\", \"me-1\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"bi\", \"bi-check-circle\", \"me-1\"], [1, \"text-danger\", \"mt-1\"], [1, \"mb-4\"], [1, \"mb-2\"], [1, \"row\", \"g-3\"], [1, \"col-md-6\"], [1, \"form-group\"], [1, \"form-label\", \"text-muted\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"col-12\"], [\"readonly\", \"\", 1, \"form-control\", 3, \"type\", \"value\"]],\n      template: function AzureDevOpsSettingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h5\", 2);\n          i0.ɵɵtext(3, \"Azure DevOps Integration\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3);\n          i0.ɵɵtemplate(5, AzureDevOpsSettingsComponent_div_5_Template, 3, 1, \"div\", 4);\n          i0.ɵɵtemplate(6, AzureDevOpsSettingsComponent_div_6_Template, 3, 1, \"div\", 5);\n          i0.ɵɵtemplate(7, AzureDevOpsSettingsComponent_div_7_Template, 4, 0, \"div\", 6);\n          i0.ɵɵtemplate(8, AzureDevOpsSettingsComponent_div_8_Template, 3, 0, \"div\", 7);\n          i0.ɵɵtemplate(9, AzureDevOpsSettingsComponent_div_9_Template, 34, 8, \"div\", 8);\n          i0.ɵɵtemplate(10, AzureDevOpsSettingsComponent_div_10_Template, 23, 5, \"div\", 8);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.success);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.authService.canViewAzureDevOpsPat() && !ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.authService.canEditAzureDevOpsPat() && !ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.authService.canViewAzureDevOpsPat() && !ctx.authService.canEditAzureDevOpsPat() && !ctx.loading && ctx.settings);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZXR0aW5ncy9henVyZS1kZXZvcHMtc2V0dGluZ3MvYXp1cmUtZGV2b3BzLXNldHRpbmdzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogQXp1cmUgRGV2T3BzIHNldHRpbmdzIGNvbXBvbmVudCBzdHlsZXMgKi8gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["Validators","i0","AzureDevOpsSettingsComponent","constructor","authService","settingsService","fb","patForm","group","personalAccessToken","required","minLength","ngOnInit","loadSettings","canViewAzureDevOpsPat","error","loading","success","getAzureDevOpsSettings","subscribe","next","settings","err","message","updatePat","canEditAzureDevOpsPat","invalid","request","value","updateAzureDevOpsPAT","reset","togglePatVisibility","showPat","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\azure-devops-settings\\azure-devops-settings.component.ts","E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\azure-devops-settings\\azure-devops-settings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { SettingsService } from '../../../services/settings.service';\r\nimport { AzureDevOpsSettingsDto, UpdateAzureDevOpsPATRequest } from '../../../models/settings.model';\r\n\r\n@Component({\r\n  selector: 'app-azure-devops-settings',\r\n  templateUrl: './azure-devops-settings.component.html',\r\n  styleUrls: ['./azure-devops-settings.component.scss']\r\n})\r\nexport class AzureDevOpsSettingsComponent implements OnInit {\r\n  settings: AzureDevOpsSettingsDto | null = null;\r\n  patForm: FormGroup;\r\n  loading = false;\r\n  error = '';\r\n  success = '';\r\n  showPat = false;\r\n\r\n  constructor(\r\n    public authService: AuthService,\r\n    private settingsService: SettingsService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.patForm = this.fb.group({\r\n      personalAccessToken: ['', [Validators.required, Validators.minLength(20)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadSettings();\r\n  }\r\n\r\n  loadSettings(): void {\r\n    if (!this.authService.canViewAzureDevOpsPat()) {\r\n      this.error = 'You do not have permission to view Azure DevOps settings';\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.error = '';\r\n    this.success = '';\r\n\r\n    this.settingsService.getAzureDevOpsSettings().subscribe({\r\n      next: (settings) => {\r\n        this.settings = settings;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = err.message || 'Failed to load Azure DevOps settings';\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  updatePat(): void {\r\n    if (!this.authService.canEditAzureDevOpsPat()) {\r\n      this.error = 'You do not have permission to update Azure DevOps PAT';\r\n      return;\r\n    }\r\n\r\n    if (this.patForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.error = '';\r\n    this.success = '';\r\n\r\n    const request: UpdateAzureDevOpsPATRequest = {\r\n      personalAccessToken: this.patForm.value.personalAccessToken\r\n    };\r\n\r\n    this.settingsService.updateAzureDevOpsPAT(request).subscribe({\r\n      next: () => {\r\n        this.success = 'Azure DevOps Personal Access Token updated successfully';\r\n        this.loading = false;\r\n        this.loadSettings(); // Reload to get the masked version\r\n        this.patForm.reset();\r\n      },\r\n      error: (err) => {\r\n        this.error = err.message || 'Failed to update Azure DevOps PAT';\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  togglePatVisibility(): void {\r\n    this.showPat = !this.showPat;\r\n  }\r\n} ","<div class=\"card\">\r\n  <div class=\"card-header\">\r\n    <h5 class=\"mb-0\">Azure DevOps Integration</h5>\r\n  </div>\r\n  <div class=\"card-body\">\r\n    <!-- Error and success alerts -->\r\n    <div *ngIf=\"error\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n      {{ error }}\r\n      <button type=\"button\" class=\"btn-close\" (click)=\"error = ''\"></button>\r\n    </div>\r\n    \r\n    <div *ngIf=\"success\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n      {{ success }}\r\n      <button type=\"button\" class=\"btn-close\" (click)=\"success = ''\"></button>\r\n    </div>\r\n\r\n    <!-- Loading state -->\r\n    <div *ngIf=\"loading\" class=\"d-flex justify-content-center mb-3\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- No permission message -->\r\n    <div *ngIf=\"!authService.canViewAzureDevOpsPat() && !loading\" class=\"alert alert-warning\">\r\n      <i class=\"bi bi-lock-fill me-2\"></i>\r\n      You do not have permission to view Azure DevOps settings. Contact an administrator.\r\n    </div>\r\n\r\n    <!-- Azure DevOps Configuration Form -->\r\n    <div *ngIf=\"authService.canEditAzureDevOpsPat() && !loading\">\r\n      <form [formGroup]=\"azureDevOpsForm\" (ngSubmit)=\"saveAzureDevOpsSettings()\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"organizationUrl\" class=\"form-label\">Organization URL</label>\r\n          <input \r\n            type=\"text\" \r\n            class=\"form-control\" \r\n            id=\"organizationUrl\" \r\n            formControlName=\"organizationUrl\"\r\n            placeholder=\"https://dev.azure.com/your-organization\">\r\n          <div *ngIf=\"azureDevOpsForm.get('organizationUrl')?.invalid && azureDevOpsForm.get('organizationUrl')?.touched\" class=\"text-danger mt-1\">\r\n            <small *ngIf=\"azureDevOpsForm.get('organizationUrl')?.errors?.['required']\">Organization URL is required</small>\r\n            <small *ngIf=\"azureDevOpsForm.get('organizationUrl')?.errors?.['pattern']\">Enter a valid Azure DevOps URL</small>\r\n          </div>\r\n          <small class=\"form-text text-muted\">\r\n            Example: https://dev.azure.com/your-organization\r\n          </small>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"personalAccessToken\" class=\"form-label\">Personal Access Token (PAT)</label>\r\n          <div class=\"input-group\">\r\n            <input \r\n              [type]=\"showPat ? 'text' : 'password'\" \r\n              class=\"form-control\" \r\n              id=\"personalAccessToken\" \r\n              formControlName=\"personalAccessToken\"\r\n              placeholder=\"Enter your Personal Access Token\">\r\n            <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"togglePatVisibility()\">\r\n              <i class=\"bi\" [ngClass]=\"showPat ? 'bi-eye-slash' : 'bi-eye'\"></i>\r\n            </button>\r\n          </div>\r\n          <div *ngIf=\"azureDevOpsForm.get('personalAccessToken')?.invalid && azureDevOpsForm.get('personalAccessToken')?.touched\" class=\"text-danger mt-1\">\r\n            <small *ngIf=\"azureDevOpsForm.get('personalAccessToken')?.errors?.['required']\">Personal Access Token is required</small>\r\n            <small *ngIf=\"azureDevOpsForm.get('personalAccessToken')?.errors?.['minlength']\">Token must be at least 20 characters</small>\r\n          </div>\r\n          <small class=\"form-text text-muted\">\r\n            <i class=\"bi bi-info-circle\"></i>\r\n            The PAT is used to authenticate with Azure DevOps. \r\n            <a href=\"https://learn.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate\" target=\"_blank\">\r\n              Learn more\r\n            </a>\r\n          </small>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"projectName\" class=\"form-label\">Project Name</label>\r\n          <input \r\n            type=\"text\" \r\n            class=\"form-control\" \r\n            id=\"projectName\" \r\n            formControlName=\"projectName\"\r\n            placeholder=\"Your Azure DevOps project name\">\r\n          <div *ngIf=\"azureDevOpsForm.get('projectName')?.invalid && azureDevOpsForm.get('projectName')?.touched\" class=\"text-danger mt-1\">\r\n            <small *ngIf=\"azureDevOpsForm.get('projectName')?.errors?.['required']\">Project name is required</small>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"d-flex gap-2\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" (click)=\"testConnection()\" [disabled]=\"azureDevOpsForm.invalid || loading\">\r\n            <i class=\"bi bi-lightning-charge me-1\"></i> Test Connection\r\n          </button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"azureDevOpsForm.invalid || loading\">\r\n            <i class=\"bi bi-check-circle me-1\"></i> Save DevOps Settings\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- Current settings display for non-admin users -->\r\n    <div *ngIf=\"authService.canViewAzureDevOpsPat() && !authService.canEditAzureDevOpsPat() && !loading && settings\">\r\n      <div class=\"mb-4\">\r\n        <h6 class=\"mb-2\">Current Settings</h6>\r\n        <div class=\"row g-3\">\r\n          <div class=\"col-md-6\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label text-muted\">Organization</label>\r\n              <input type=\"text\" class=\"form-control\" [value]=\"settings.organization\" readonly>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label text-muted\">Project</label>\r\n              <input type=\"text\" class=\"form-control\" [value]=\"settings.project\" readonly>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label text-muted\">Personal Access Token</label>\r\n              <div class=\"input-group\">\r\n                <input [type]=\"showPat ? 'text' : 'password'\" class=\"form-control\" [value]=\"settings.personalAccessToken\" readonly>\r\n                <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"togglePatVisibility()\">\r\n                  <i class=\"bi\" [ngClass]=\"showPat ? 'bi-eye-slash' : 'bi-eye'\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}