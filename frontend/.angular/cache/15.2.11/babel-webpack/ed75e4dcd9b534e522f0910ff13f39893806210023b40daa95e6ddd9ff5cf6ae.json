{"ast":null,"code":"import { UserRole } from '../../models/settings.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/settings.service\";\nimport * as i3 from \"../../services/team.service\";\nimport * as i4 from \"../../services/task.service\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"./user-roles/user-roles.component\";\nimport * as i9 from \"./azure-devops-settings/azure-devops-settings.component\";\nimport * as i10 from \"./ai-model-settings/ai-model-settings.component\";\nfunction SettingsComponent_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const role_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", role_r3.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(role_r3.label);\n  }\n}\nfunction SettingsComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function SettingsComponent_div_47_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.successMessage = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.successMessage, \" \");\n  }\n}\nfunction SettingsComponent_div_65_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53)(2, \"span\", 54);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"span\", 55);\n    i0.ɵɵtext(5, \"Loading team members...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SettingsComponent_div_65_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r7.teamMembersError, \" \");\n  }\n}\nfunction SettingsComponent_div_65_div_15_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 63);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" No team members found for team \\\"\", ctx_r11.teamName, \"\\\". API returned data but filtering may have removed all entries. \");\n  }\n}\nfunction SettingsComponent_div_65_div_15_div_8_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 70);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const member_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", member_r13.currentWorkload, \" tasks \");\n  }\n}\nfunction SettingsComponent_div_65_div_15_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 64)(1, \"input\", 65);\n    i0.ɵɵlistener(\"ngModelChange\", function SettingsComponent_div_65_div_15_div_8_Template_input_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const member_r13 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(member_r13.selected = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 66);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"small\", 67)(5, \"span\", 68);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, SettingsComponent_div_65_div_15_div_8_span_7_Template, 2, 1, \"span\", 69);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const member_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"teamMember\", member_r13.id, \"\");\n    i0.ɵɵproperty(\"id\", \"member-\" + member_r13.id)(\"ngModel\", member_r13.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"member-\" + member_r13.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", member_r13.displayName, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(member_r13.team);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", member_r13.currentWorkload && member_r13.currentWorkload > 0);\n  }\n}\nfunction SettingsComponent_div_65_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 57)(1, \"label\", 58);\n    i0.ɵɵtext(2, \" Select Team Members for Auto-Assignment \");\n    i0.ɵɵelementStart(3, \"button\", 59);\n    i0.ɵɵlistener(\"click\", function SettingsComponent_div_65_div_15_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.forceReloadTeamMembers());\n    });\n    i0.ɵɵelement(4, \"i\", 60);\n    i0.ɵɵtext(5, \" Force Reload \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, SettingsComponent_div_65_div_15_div_6_Template, 2, 1, \"div\", 50);\n    i0.ɵɵelementStart(7, \"div\", 61);\n    i0.ɵɵtemplate(8, SettingsComponent_div_65_div_15_div_8_Template, 8, 7, \"div\", 62);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r8.loadingTeamMembers);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.teamMembers.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.teamMembers);\n  }\n}\nfunction SettingsComponent_div_65_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 63);\n    i0.ɵɵtext(1, \" No team members found. Please check the team name and try again. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SettingsComponent_div_65_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 71)(1, \"h6\", 72);\n    i0.ɵɵtext(2, \"Raw API Response (Debug):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"pre\", 73);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r10.rawApiResponse);\n  }\n}\nfunction SettingsComponent_div_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40)(2, \"div\")(3, \"label\", 41);\n    i0.ɵɵtext(4, \"Team Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 42);\n    i0.ɵɵlistener(\"ngModelChange\", function SettingsComponent_div_65_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.teamName = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\")(7, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function SettingsComponent_div_65_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.loadTeamMembers());\n    });\n    i0.ɵɵelement(8, \"i\", 44);\n    i0.ɵɵtext(9, \" Load Team Members \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function SettingsComponent_div_65_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.forceReloadTeamMembers());\n    });\n    i0.ɵɵelement(11, \"i\", 46);\n    i0.ɵɵtext(12, \" Clear & Direct Load \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(13, SettingsComponent_div_65_div_13_Template, 6, 0, \"div\", 47);\n    i0.ɵɵtemplate(14, SettingsComponent_div_65_div_14_Template, 2, 1, \"div\", 48);\n    i0.ɵɵtemplate(15, SettingsComponent_div_65_div_15_Template, 9, 3, \"div\", 49);\n    i0.ɵɵtemplate(16, SettingsComponent_div_65_div_16_Template, 2, 0, \"div\", 50);\n    i0.ɵɵtemplate(17, SettingsComponent_div_65_div_17_Template, 5, 1, \"div\", 51);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.teamName);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.loadingTeamMembers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.teamMembersError);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.loadingTeamMembers && ctx_r2.teamMembers.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.loadingTeamMembers && ctx_r2.teamMembers.length === 0 && !ctx_r2.teamMembersError);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.rawApiResponse);\n  }\n}\nexport class SettingsComponent {\n  constructor(authService, settingsService, teamService, taskService, http) {\n    this.authService = authService;\n    this.settingsService = settingsService;\n    this.teamService = teamService;\n    this.taskService = taskService;\n    this.http = http;\n    this.loading = {\n      settings: false,\n      userRoles: false,\n      azureDevOps: false,\n      aiModel: false\n    };\n    this.error = {\n      settings: '',\n      userRoles: '',\n      azureDevOps: '',\n      aiModel: ''\n    };\n    // Role options for demo purposes\n    this.roleOptions = [{\n      value: UserRole.Admin,\n      label: 'Admin'\n    }, {\n      value: UserRole.ScrumMaster,\n      label: 'Scrum Master'\n    }, {\n      value: UserRole.Member,\n      label: 'Member'\n    }];\n    // For demo/testing - allow changing current user role\n    this.demoUserRole = UserRole.Admin;\n    // Team Filters & Iteration Settings\n    this.defaultIterationPath = 'Techoil\\\\2.3.23';\n    this.enableTeamFilter = true;\n    this.teamName = 'RND';\n    this.teamMembers = [];\n    this.loadingTeamMembers = false;\n    this.teamMembersError = '';\n    this.successMessage = '';\n    // Add diagnostic property to store raw API response\n    this.rawApiResponse = '';\n  }\n  ngOnInit() {\n    // Initialize with current user role\n    const currentUser = this.authService.currentUserValue;\n    if (currentUser) {\n      this.demoUserRole = currentUser.role;\n    }\n    // Clear any potential fallback data\n    this.teamMembers = [];\n    // Load saved team filter settings\n    this.loadTeamFilterSettings();\n    // Load fresh team members data\n    this.forceReloadTeamMembers();\n  }\n  // For demo purposes - change current user role\n  changeUserRole() {\n    this.authService.changeUserRole(this.demoUserRole);\n  }\n  // Load team filter settings from local storage\n  loadTeamFilterSettings() {\n    const savedSettings = localStorage.getItem('teamFilterSettings');\n    console.log('Loading team filter settings from localStorage:', savedSettings ? 'Found settings' : 'No settings found');\n    if (savedSettings) {\n      const settings = JSON.parse(savedSettings);\n      console.log('Parsed settings:', settings);\n      this.enableTeamFilter = settings.enableTeamFilter ?? true;\n      this.teamName = settings.teamName ?? 'RND';\n      this.defaultIterationPath = settings.defaultIterationPath ?? 'Techoil\\\\2.3.23';\n      console.log('Applied settings:', {\n        enableTeamFilter: this.enableTeamFilter,\n        teamName: this.teamName,\n        defaultIterationPath: this.defaultIterationPath,\n        savedSelectedMembers: settings.selectedMembers?.length || 0\n      });\n      // Load team members if filter is enabled\n      if (this.enableTeamFilter) {\n        this.loadTeamMembers();\n      }\n    }\n  }\n  // Save team filter settings to local storage\n  saveTeamFilterSettings() {\n    // Save the settings to local storage\n    const selectedMembers = this.teamMembers.filter(m => m.selected).map(m => ({\n      id: m.id,\n      displayName: m.displayName,\n      team: m.team || 'RND Team',\n      email: m.email\n    }));\n    const settings = {\n      enableTeamFilter: this.enableTeamFilter,\n      teamName: this.teamName,\n      defaultIterationPath: this.defaultIterationPath,\n      selectedMembers: selectedMembers\n    };\n    // Debug log the settings being saved\n    console.log('Saving team filter settings:', settings);\n    localStorage.setItem('teamFilterSettings', JSON.stringify(settings));\n    // Show success message\n    this.successMessage = 'Team filter settings saved successfully!';\n    setTimeout(() => {\n      this.successMessage = '';\n    }, 3000);\n  }\n  // Save iteration settings\n  saveIterationSettings() {\n    localStorage.setItem('defaultIterationPath', this.defaultIterationPath);\n    // Show success message\n    this.successMessage = 'Iteration settings saved successfully!';\n    setTimeout(() => {\n      this.successMessage = '';\n    }, 3000);\n  }\n  // Load team members from the API\n  loadTeamMembers() {\n    this.loadingTeamMembers = true;\n    this.teamMembersError = '';\n    // First try to get them from local storage\n    const savedSettings = localStorage.getItem('teamFilterSettings');\n    const savedMembers = savedSettings ? JSON.parse(savedSettings).selectedMembers || [] : [];\n    console.log('Calling API to load team members...');\n    this.teamService.getTeamMembers().subscribe({\n      next: members => {\n        console.log('API Response for team members:', members);\n        console.log('Response type:', Array.isArray(members) ? 'Array' : typeof members);\n        if (members.length > 0) {\n          console.log('First item type:', typeof members[0]);\n          console.log('First item sample:', members[0]);\n        }\n        // Check if we received the expected API format with id, displayName, etc. properties\n        const hasExpectedFormat = members.length > 0 && typeof members[0] === 'object' && 'displayName' in members[0] && 'id' in members[0];\n        if (hasExpectedFormat) {\n          // This is the proper API response with full member objects\n          this.teamMembers = members.map(m => {\n            // Check if this member was previously selected\n            const wasSelected = savedMembers.some(sm => sm.id === m.id || sm.displayName === m.displayName);\n            return {\n              id: m.id,\n              displayName: m.displayName,\n              team: m.team || 'RND Team',\n              email: m.email || m.uniqueName || '',\n              currentWorkload: m.currentWorkload || 0,\n              selected: wasSelected\n            };\n          });\n          console.log('Using proper API response:', this.teamMembers);\n        } else {\n          // Handle case where it's just strings or unexpected format\n          this.teamMembers = members.map((m, index) => {\n            const name = typeof m === 'string' ? m : m.displayName || `Unknown Member ${index}`;\n            // Check if this member was previously selected\n            const wasSelected = savedMembers.some(sm => typeof m === 'string' && sm.displayName === m || typeof m === 'object' && sm.id === m.id || sm.displayName === name);\n            return {\n              id: typeof m === 'object' ? m.id : `member-${index}`,\n              displayName: name,\n              team: typeof m === 'object' ? m.team || 'RND Team' : 'RND Team',\n              email: typeof m === 'object' ? m.email || m.uniqueName || '' : '',\n              currentWorkload: typeof m === 'object' ? m.currentWorkload || 0 : 0,\n              selected: wasSelected\n            };\n          });\n          console.log('Using mapped API response:', this.teamMembers);\n        }\n        // Filter by team name if provided\n        // For \"RND\", we want to match against \"RND Team\" in the team property\n        if (this.teamName) {\n          const teamNameLower = this.teamName.toLowerCase();\n          this.teamMembers = this.teamMembers.filter(m => {\n            // If team property exists, check if it contains the team name\n            if (m.team) {\n              const teamProperty = m.team.toLowerCase();\n              // Match various forms: \"RND\", \"RND Team\", etc.\n              return teamProperty.includes(teamNameLower) || teamProperty.includes('rnd') || teamProperty.includes('r&d');\n            }\n            // If no team property or no match, fallback to check displayName (backward compatibility)\n            return m.displayName.toLowerCase().includes(teamNameLower);\n          });\n        }\n        console.log('Processed team members for display:', this.teamMembers);\n        this.loadingTeamMembers = false;\n      },\n      error: err => {\n        console.error('Error loading team members:', err);\n        this.teamMembersError = 'Failed to load team members. Please try again.';\n        this.loadingTeamMembers = false;\n      }\n    });\n  }\n  // Force reload team members - clear cache and fetch fresh data\n  forceReloadTeamMembers() {\n    console.log('Force reloading team members - clearing cache first');\n    // Clear local team members array\n    this.teamMembers = [];\n    this.rawApiResponse = '';\n    // Clear cached settings\n    localStorage.removeItem('teamFilterSettings');\n    // Show clear loading state\n    this.loadingTeamMembers = true;\n    this.teamMembersError = '';\n    // Add a small delay to ensure UI updates\n    setTimeout(() => {\n      // Make a direct API call without going through the service\n      const apiUrl = `${this.teamService['apiUrl']}?_t=${new Date().getTime()}`;\n      console.log(`Making direct API call to: ${apiUrl}`);\n      this.http.get(apiUrl).subscribe({\n        next: response => {\n          console.log('Raw API Response:', response);\n          // Store the raw response for debugging\n          this.rawApiResponse = JSON.stringify(response, null, 2);\n          // Now process through the service\n          this.teamService.getTeamMembers(new Date().getTime()).subscribe({\n            next: members => {\n              console.log('Processed members:', members);\n              if (members.length > 0) {\n                // Process the response - convert to TeamMember objects\n                this.teamMembers = members.map(m => {\n                  return {\n                    id: m.id || `member-${Math.random().toString(36).substring(2, 10)}`,\n                    displayName: m.displayName || (typeof m === 'string' ? m : 'Unknown'),\n                    team: m.team || 'RND Team',\n                    email: m.email || m.uniqueName || '',\n                    currentWorkload: m.currentWorkload || 0,\n                    selected: false // Start fresh with no selections\n                  };\n                });\n              }\n\n              this.loadingTeamMembers = false;\n            },\n            error: err => {\n              console.error('Error during processing of team members:', err);\n              this.teamMembersError = `Failed to process team members: ${err.message || 'Unknown error'}`;\n              this.loadingTeamMembers = false;\n            }\n          });\n        },\n        error: err => {\n          console.error('Error during direct API call:', err);\n          this.teamMembersError = `Failed to make direct API call: ${err.message || 'Unknown error'}`;\n          this.loadingTeamMembers = false;\n        }\n      });\n    }, 100);\n  }\n  // Clear localStorage and reload the page\n  clearLocalStorage() {\n    console.log('Clearing all localStorage data');\n    localStorage.clear();\n    // Clear the teamMembers array\n    this.teamMembers = [];\n    // Show success message\n    this.successMessage = 'Cache cleared! Reloading page...';\n    // Reload the page after a short delay\n    setTimeout(() => {\n      window.location.reload();\n    }, 1000);\n  }\n  static {\n    this.ɵfac = function SettingsComponent_Factory(t) {\n      return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.TeamService), i0.ɵɵdirectiveInject(i4.TaskService), i0.ɵɵdirectiveInject(i5.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SettingsComponent,\n      selectors: [[\"app-settings\"]],\n      decls: 71,\n      vars: 7,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"mb-4\"], [1, \"card\", \"mb-4\"], [1, \"card-body\"], [1, \"d-flex\", \"align-items-center\"], [1, \"me-3\"], [1, \"form-select\", \"w-auto\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"ms-3\", \"text-muted\"], [1, \"fw-bold\"], [1, \"nav\", \"nav-tabs\", \"mb-4\"], [1, \"nav-item\"], [\"data-bs-toggle\", \"tab\", \"href\", \"#userRoles\", 1, \"nav-link\", \"active\"], [\"data-bs-toggle\", \"tab\", \"href\", \"#azureDevOps\", 1, \"nav-link\"], [\"data-bs-toggle\", \"tab\", \"href\", \"#aiModel\", 1, \"nav-link\"], [\"data-bs-toggle\", \"tab\", \"href\", \"#teamFilters\", 1, \"nav-link\"], [1, \"tab-content\"], [\"id\", \"userRoles\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [\"id\", \"azureDevOps\", 1, \"tab-pane\", \"fade\"], [\"id\", \"aiModel\", 1, \"tab-pane\", \"fade\"], [\"id\", \"teamFilters\", 1, \"tab-pane\", \"fade\"], [1, \"card\"], [1, \"card-header\"], [1, \"mb-0\"], [\"class\", \"alert alert-success alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"defaultIterationPath\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"defaultIterationPath\", \"placeholder\", \"Enter default iteration path (e.g. Techoil\\\\2.3.23)\", \"name\", \"defaultIterationPath\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-text\", \"text-muted\"], [1, \"form-group\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"form-check\", \"form-switch\", \"mb-3\"], [\"type\", \"checkbox\", \"id\", \"enableTeamFilter\", \"name\", \"enableTeamFilter\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"enableTeamFilter\", 1, \"form-check-label\"], [\"class\", \"card bg-light p-3 mb-3\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"ms-2\", 3, \"click\"], [3, \"value\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [1, \"card\", \"bg-light\", \"p-3\", \"mb-3\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [\"for\", \"teamName\", 1, \"form-label\", \"me-2\"], [\"type\", \"text\", \"id\", \"teamName\", \"name\", \"teamName\", \"value\", \"RND\", 1, \"form-control\", \"d-inline-block\", \"w-auto\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [1, \"bi\", \"bi-arrow-repeat\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-danger\", \"ms-2\", 3, \"click\"], [1, \"bi\", \"bi-exclamation-triangle\"], [\"class\", \"text-center py-2\", 4, \"ngIf\"], [\"class\", \"alert alert-danger alert-sm\", 4, \"ngIf\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [1, \"text-center\", \"py-2\"], [\"role\", \"status\", 1, \"spinner-border\", \"spinner-border-sm\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"ms-2\"], [1, \"alert\", \"alert-danger\", \"alert-sm\"], [1, \"mb-3\"], [1, \"form-label\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"fas\", \"fa-sync-alt\"], [1, \"team-members-list\"], [\"class\", \"form-check mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"alert\", \"alert-warning\"], [1, \"form-check\", \"mb-2\"], [\"type\", \"checkbox\", 1, \"form-check-input\", 3, \"id\", \"ngModel\", \"name\", \"ngModelChange\"], [1, \"form-check-label\", 3, \"for\"], [1, \"text-muted\", \"ms-2\"], [1, \"badge\", \"bg-secondary\"], [\"class\", \"badge bg-info ms-1\", 4, \"ngIf\"], [1, \"badge\", \"bg-info\", \"ms-1\"], [1, \"mt-3\"], [1, \"text-danger\"], [1, \"bg-light\", \"p-2\", 2, \"max-height\", \"200px\", \"overflow-y\", \"auto\", \"font-size\", \"0.8rem\"]],\n      template: function SettingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Application Settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"strong\");\n          i0.ɵɵtext(8, \"Demo Mode:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(9, \" Change your current role \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"select\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function SettingsComponent_Template_select_ngModelChange_10_listener($event) {\n            return ctx.demoUserRole = $event;\n          })(\"change\", function SettingsComponent_Template_select_change_10_listener() {\n            return ctx.changeUserRole();\n          });\n          i0.ɵɵtemplate(11, SettingsComponent_option_11_Template, 2, 2, \"option\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 8)(13, \"small\");\n          i0.ɵɵtext(14, \"Current role: \");\n          i0.ɵɵelementStart(15, \"span\", 9);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(17, \"ul\", 10)(18, \"li\", 11)(19, \"a\", 12);\n          i0.ɵɵtext(20, \"User Roles\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"li\", 11)(22, \"a\", 13);\n          i0.ɵɵtext(23, \"Azure DevOps\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"li\", 11)(25, \"a\", 14);\n          i0.ɵɵtext(26, \"AI Model\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"li\", 11)(28, \"a\", 15);\n          i0.ɵɵtext(29, \"Team Filters\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(30, \"div\", 16)(31, \"div\", 17);\n          i0.ɵɵelement(32, \"app-user-roles\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 18);\n          i0.ɵɵelement(34, \"app-azure-devops-settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"div\", 19);\n          i0.ɵɵelement(36, \"app-ai-model-settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"div\", 20)(38, \"div\", 21)(39, \"div\", 22)(40, \"h5\", 23);\n          i0.ɵɵtext(41, \"Team Filters & Iteration Settings\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(42, \"div\", 3)(43, \"form\")(44, \"div\", 1)(45, \"h6\");\n          i0.ɵɵtext(46, \"Iteration Path Settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(47, SettingsComponent_div_47_Template, 3, 1, \"div\", 24);\n          i0.ɵɵelementStart(48, \"div\", 25)(49, \"label\", 26);\n          i0.ɵɵtext(50, \"Default Iteration Path\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"input\", 27);\n          i0.ɵɵlistener(\"ngModelChange\", function SettingsComponent_Template_input_ngModelChange_51_listener($event) {\n            return ctx.defaultIterationPath = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"small\", 28);\n          i0.ɵɵtext(53, \"This iteration path will be used by default in task distribution\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(54, \"div\", 29)(55, \"button\", 30);\n          i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_55_listener() {\n            return ctx.saveIterationSettings();\n          });\n          i0.ɵɵtext(56, \" Save Iteration Settings \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(57, \"hr\");\n          i0.ɵɵelementStart(58, \"div\", 1)(59, \"h6\");\n          i0.ɵɵtext(60, \"Team Filters\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"div\", 31)(62, \"input\", 32);\n          i0.ɵɵlistener(\"ngModelChange\", function SettingsComponent_Template_input_ngModelChange_62_listener($event) {\n            return ctx.enableTeamFilter = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(63, \"label\", 33);\n          i0.ɵɵtext(64, \" Enable RND Team Filtering for Auto-Assign \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(65, SettingsComponent_div_65_Template, 18, 6, \"div\", 34);\n          i0.ɵɵelementStart(66, \"div\", 29)(67, \"button\", 30);\n          i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_67_listener() {\n            return ctx.saveTeamFilterSettings();\n          });\n          i0.ɵɵtext(68, \" Save Team Filter Settings \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(69, \"button\", 35);\n          i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_69_listener() {\n            return ctx.clearLocalStorage();\n          });\n          i0.ɵɵtext(70, \" Clear Cache & Reload \");\n          i0.ɵɵelementEnd()()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngModel\", ctx.demoUserRole);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.roleOptions);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.authService.currentUserValue == null ? null : ctx.authService.currentUserValue.role);\n          i0.ɵɵadvance(31);\n          i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.defaultIterationPath);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngModel\", ctx.enableTeamFilter);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.enableTeamFilter);\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.CheckboxControlValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i8.UserRolesComponent, i9.AzureDevOpsSettingsComponent, i10.AiModelSettingsComponent],\n      styles: [\"h2[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n  color: #2c3e50;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  padding-top: 1.5rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZXR0aW5ncy9zZXR0aW5ncy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImgyIHtcclxuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgY29sb3I6ICMyYzNlNTA7XHJcbn1cclxuXHJcbi5jb250YWluZXIge1xyXG4gIHBhZGRpbmctdG9wOiAxLjVyZW07XHJcbn0gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["UserRole","i0","SettingsComponent","constructor","authService","settingsService","teamService","taskService","http","settings","userRoles","azureDevOps","aiModel","value","Admin","label","ScrumMaster","Member","ngOnInit","currentUser","currentUserValue","demoUserRole","role","teamMembers","loadTeamFilterSettings","forceReloadTeamMembers","changeUserRole","savedSettings","localStorage","getItem","console","log","JSON","parse","enableTeamFilter","teamName","defaultIterationPath","savedSelectedMembers","selectedMembers","length","loadTeamMembers","saveTeamFilterSettings","filter","m","selected","map","id","displayName","team","email","setItem","stringify","successMessage","setTimeout","saveIterationSettings","loadingTeamMembers","teamMembersError","savedMembers","getTeamMembers","subscribe","next","members","Array","isArray","hasExpectedFormat","wasSelected","some","sm","uniqueName","currentWorkload","index","name","teamNameLower","toLowerCase","teamProperty","includes","error","err","rawApiResponse","removeItem","apiUrl","Date","getTime","get","response","Math","random","toString","substring","message","clearLocalStorage","clear","window","location","reload","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\settings.component.ts","E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\settings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { SettingsService } from '../../services/settings.service';\r\nimport { SettingsDto, UserRole } from '../../models/settings.model';\r\nimport { TeamService } from '../../services/team.service';\r\nimport { TaskService } from '../../services/task.service';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n// Interface for team member structure\r\ninterface TeamMember {\r\n  id: string;\r\n  displayName: string;\r\n  selected: boolean;\r\n  team?: string;\r\n  email?: string;\r\n  currentWorkload?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss']\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  loading = {\r\n    settings: false,\r\n    userRoles: false,\r\n    azureDevOps: false,\r\n    aiModel: false\r\n  };\r\n  \r\n  error = {\r\n    settings: '',\r\n    userRoles: '',\r\n    azureDevOps: '',\r\n    aiModel: ''\r\n  };\r\n\r\n  // Role options for demo purposes\r\n  roleOptions = [\r\n    { value: UserRole.Admin, label: 'Admin' },\r\n    { value: UserRole.ScrumMaster, label: 'Scrum Master' },\r\n    { value: UserRole.Member, label: 'Member' }\r\n  ];\r\n\r\n  // For demo/testing - allow changing current user role\r\n  demoUserRole = UserRole.Admin;\r\n\r\n  // Team Filters & Iteration Settings\r\n  defaultIterationPath = 'Techoil\\\\2.3.23';\r\n  enableTeamFilter = true;\r\n  teamName = 'RND';\r\n  teamMembers: TeamMember[] = [];\r\n  loadingTeamMembers = false;\r\n  teamMembersError = '';\r\n  successMessage = '';\r\n\r\n  // Add diagnostic property to store raw API response\r\n  rawApiResponse: string = '';\r\n\r\n  constructor(\r\n    public authService: AuthService,\r\n    private settingsService: SettingsService,\r\n    private teamService: TeamService,\r\n    private taskService: TaskService,\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // Initialize with current user role\r\n    const currentUser = this.authService.currentUserValue;\r\n    if (currentUser) {\r\n      this.demoUserRole = currentUser.role;\r\n    }\r\n\r\n    // Clear any potential fallback data\r\n    this.teamMembers = [];\r\n\r\n    // Load saved team filter settings\r\n    this.loadTeamFilterSettings();\r\n    \r\n    // Load fresh team members data\r\n    this.forceReloadTeamMembers();\r\n  }\r\n\r\n  // For demo purposes - change current user role\r\n  changeUserRole(): void {\r\n    this.authService.changeUserRole(this.demoUserRole);\r\n  }\r\n\r\n  // Load team filter settings from local storage\r\n  loadTeamFilterSettings(): void {\r\n    const savedSettings = localStorage.getItem('teamFilterSettings');\r\n    console.log('Loading team filter settings from localStorage:', savedSettings ? 'Found settings' : 'No settings found');\r\n    \r\n    if (savedSettings) {\r\n      const settings = JSON.parse(savedSettings);\r\n      console.log('Parsed settings:', settings);\r\n      \r\n      this.enableTeamFilter = settings.enableTeamFilter ?? true;\r\n      this.teamName = settings.teamName ?? 'RND';\r\n      this.defaultIterationPath = settings.defaultIterationPath ?? 'Techoil\\\\2.3.23';\r\n      \r\n      console.log('Applied settings:', {\r\n        enableTeamFilter: this.enableTeamFilter,\r\n        teamName: this.teamName,\r\n        defaultIterationPath: this.defaultIterationPath,\r\n        savedSelectedMembers: settings.selectedMembers?.length || 0\r\n      });\r\n      \r\n      // Load team members if filter is enabled\r\n      if (this.enableTeamFilter) {\r\n        this.loadTeamMembers();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Save team filter settings to local storage\r\n  saveTeamFilterSettings(): void {\r\n    // Save the settings to local storage\r\n    const selectedMembers = this.teamMembers\r\n      .filter(m => m.selected)\r\n      .map(m => ({\r\n        id: m.id,\r\n        displayName: m.displayName,\r\n        team: m.team || 'RND Team',\r\n        email: m.email\r\n      }));\r\n    \r\n    const settings = {\r\n      enableTeamFilter: this.enableTeamFilter,\r\n      teamName: this.teamName,\r\n      defaultIterationPath: this.defaultIterationPath,\r\n      selectedMembers: selectedMembers\r\n    };\r\n    \r\n    // Debug log the settings being saved\r\n    console.log('Saving team filter settings:', settings);\r\n    localStorage.setItem('teamFilterSettings', JSON.stringify(settings));\r\n    \r\n    // Show success message\r\n    this.successMessage = 'Team filter settings saved successfully!';\r\n    setTimeout(() => {\r\n      this.successMessage = '';\r\n    }, 3000);\r\n  }\r\n\r\n  // Save iteration settings\r\n  saveIterationSettings(): void {\r\n    localStorage.setItem('defaultIterationPath', this.defaultIterationPath);\r\n    \r\n    // Show success message\r\n    this.successMessage = 'Iteration settings saved successfully!';\r\n    setTimeout(() => {\r\n      this.successMessage = '';\r\n    }, 3000);\r\n  }\r\n\r\n  // Load team members from the API\r\n  loadTeamMembers(): void {\r\n    this.loadingTeamMembers = true;\r\n    this.teamMembersError = '';\r\n    \r\n    // First try to get them from local storage\r\n    const savedSettings = localStorage.getItem('teamFilterSettings');\r\n    const savedMembers = savedSettings ? JSON.parse(savedSettings).selectedMembers || [] : [];\r\n    \r\n    console.log('Calling API to load team members...');\r\n    \r\n    this.teamService.getTeamMembers().subscribe({\r\n      next: (members: any[]) => {\r\n        console.log('API Response for team members:', members);\r\n        console.log('Response type:', Array.isArray(members) ? 'Array' : typeof members);\r\n        \r\n        if (members.length > 0) {\r\n          console.log('First item type:', typeof members[0]);\r\n          console.log('First item sample:', members[0]);\r\n        }\r\n        \r\n        // Check if we received the expected API format with id, displayName, etc. properties\r\n        const hasExpectedFormat = members.length > 0 && \r\n                                  typeof members[0] === 'object' && \r\n                                  'displayName' in members[0] && \r\n                                  'id' in members[0];\r\n        \r\n        if (hasExpectedFormat) {\r\n          // This is the proper API response with full member objects\r\n          this.teamMembers = members.map(m => {\r\n            // Check if this member was previously selected\r\n            const wasSelected = savedMembers.some((sm: any) => \r\n              sm.id === m.id || sm.displayName === m.displayName\r\n            );\r\n            \r\n            return {\r\n              id: m.id,\r\n              displayName: m.displayName,\r\n              team: m.team || 'RND Team',\r\n              email: m.email || m.uniqueName || '',\r\n              currentWorkload: m.currentWorkload || 0,\r\n              selected: wasSelected\r\n            };\r\n          });\r\n          \r\n          console.log('Using proper API response:', this.teamMembers);\r\n        } else {\r\n          // Handle case where it's just strings or unexpected format\r\n          this.teamMembers = members.map((m: any, index) => {\r\n            const name = typeof m === 'string' ? m : (m.displayName || `Unknown Member ${index}`);\r\n            \r\n            // Check if this member was previously selected\r\n            const wasSelected = savedMembers.some((sm: any) => \r\n              (typeof m === 'string' && sm.displayName === m) ||\r\n              (typeof m === 'object' && sm.id === m.id) ||\r\n              sm.displayName === name\r\n            );\r\n            \r\n            return {\r\n              id: typeof m === 'object' ? m.id : `member-${index}`,\r\n              displayName: name,\r\n              team: typeof m === 'object' ? (m.team || 'RND Team') : 'RND Team',\r\n              email: typeof m === 'object' ? (m.email || m.uniqueName || '') : '',\r\n              currentWorkload: typeof m === 'object' ? (m.currentWorkload || 0) : 0,\r\n              selected: wasSelected\r\n            };\r\n          });\r\n          \r\n          console.log('Using mapped API response:', this.teamMembers);\r\n        }\r\n        \r\n        // Filter by team name if provided\r\n        // For \"RND\", we want to match against \"RND Team\" in the team property\r\n        if (this.teamName) {\r\n          const teamNameLower = this.teamName.toLowerCase();\r\n          \r\n          this.teamMembers = this.teamMembers.filter(m => {\r\n            // If team property exists, check if it contains the team name\r\n            if (m.team) {\r\n              const teamProperty = m.team.toLowerCase();\r\n              // Match various forms: \"RND\", \"RND Team\", etc.\r\n              return teamProperty.includes(teamNameLower) || \r\n                     teamProperty.includes('rnd') ||\r\n                     teamProperty.includes('r&d');\r\n            }\r\n            \r\n            // If no team property or no match, fallback to check displayName (backward compatibility)\r\n            return m.displayName.toLowerCase().includes(teamNameLower);\r\n          });\r\n        }\r\n        \r\n        console.log('Processed team members for display:', this.teamMembers);\r\n        this.loadingTeamMembers = false;\r\n      },\r\n      error: (err) => {\r\n        console.error('Error loading team members:', err);\r\n        this.teamMembersError = 'Failed to load team members. Please try again.';\r\n        this.loadingTeamMembers = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Force reload team members - clear cache and fetch fresh data\r\n  forceReloadTeamMembers(): void {\r\n    console.log('Force reloading team members - clearing cache first');\r\n    \r\n    // Clear local team members array\r\n    this.teamMembers = [];\r\n    this.rawApiResponse = '';\r\n    \r\n    // Clear cached settings\r\n    localStorage.removeItem('teamFilterSettings');\r\n    \r\n    // Show clear loading state\r\n    this.loadingTeamMembers = true;\r\n    this.teamMembersError = '';\r\n    \r\n    // Add a small delay to ensure UI updates\r\n    setTimeout(() => {\r\n      // Make a direct API call without going through the service\r\n      const apiUrl = `${this.teamService['apiUrl']}?_t=${new Date().getTime()}`;\r\n      console.log(`Making direct API call to: ${apiUrl}`);\r\n      \r\n      this.http.get(apiUrl).subscribe({\r\n        next: (response: any) => {\r\n          console.log('Raw API Response:', response);\r\n          \r\n          // Store the raw response for debugging\r\n          this.rawApiResponse = JSON.stringify(response, null, 2);\r\n          \r\n          // Now process through the service\r\n          this.teamService.getTeamMembers(new Date().getTime()).subscribe({\r\n            next: (members: any[]) => {\r\n              console.log('Processed members:', members);\r\n              \r\n              if (members.length > 0) {\r\n                // Process the response - convert to TeamMember objects\r\n                this.teamMembers = members.map(m => {\r\n                  return {\r\n                    id: m.id || `member-${Math.random().toString(36).substring(2, 10)}`,\r\n                    displayName: m.displayName || (typeof m === 'string' ? m : 'Unknown'),\r\n                    team: m.team || 'RND Team',\r\n                    email: m.email || m.uniqueName || '',\r\n                    currentWorkload: m.currentWorkload || 0,\r\n                    selected: false // Start fresh with no selections\r\n                  };\r\n                });\r\n              }\r\n              \r\n              this.loadingTeamMembers = false;\r\n            },\r\n            error: (err) => {\r\n              console.error('Error during processing of team members:', err);\r\n              this.teamMembersError = `Failed to process team members: ${err.message || 'Unknown error'}`;\r\n              this.loadingTeamMembers = false;\r\n            }\r\n          });\r\n        },\r\n        error: (err) => {\r\n          console.error('Error during direct API call:', err);\r\n          this.teamMembersError = `Failed to make direct API call: ${err.message || 'Unknown error'}`;\r\n          this.loadingTeamMembers = false;\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  // Clear localStorage and reload the page\r\n  clearLocalStorage(): void {\r\n    console.log('Clearing all localStorage data');\r\n    localStorage.clear();\r\n    \r\n    // Clear the teamMembers array\r\n    this.teamMembers = [];\r\n    \r\n    // Show success message\r\n    this.successMessage = 'Cache cleared! Reloading page...';\r\n    \r\n    // Reload the page after a short delay\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 1000);\r\n  }\r\n} ","<div class=\"container mt-4\">\r\n  <h2 class=\"mb-4\">Application Settings</h2>\r\n  \r\n  <!-- Role switcher for demo purposes -->\r\n  <div class=\"card mb-4\">\r\n    <div class=\"card-body\">\r\n      <div class=\"d-flex align-items-center\">\r\n        <div class=\"me-3\">\r\n          <strong>Demo Mode:</strong> Change your current role\r\n        </div>\r\n        <select [(ngModel)]=\"demoUserRole\" (change)=\"changeUserRole()\" class=\"form-select w-auto\">\r\n          <option *ngFor=\"let role of roleOptions\" [value]=\"role.value\">{{role.label}}</option>\r\n        </select>\r\n        <div class=\"ms-3 text-muted\">\r\n          <small>Current role: <span class=\"fw-bold\">{{authService.currentUserValue?.role}}</span></small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Tab navigation for settings sections -->\r\n  <ul class=\"nav nav-tabs mb-4\">\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link active\" data-bs-toggle=\"tab\" href=\"#userRoles\">User Roles</a>\r\n    </li>\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link\" data-bs-toggle=\"tab\" href=\"#azureDevOps\">Azure DevOps</a>\r\n    </li>\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link\" data-bs-toggle=\"tab\" href=\"#aiModel\">AI Model</a>\r\n    </li>\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link\" data-bs-toggle=\"tab\" href=\"#teamFilters\">Team Filters</a>\r\n    </li>\r\n  </ul>\r\n\r\n  <!-- Tab content -->\r\n  <div class=\"tab-content\">\r\n    <div class=\"tab-pane fade show active\" id=\"userRoles\">\r\n      <app-user-roles></app-user-roles>\r\n    </div>\r\n    <div class=\"tab-pane fade\" id=\"azureDevOps\">\r\n      <app-azure-devops-settings></app-azure-devops-settings>\r\n    </div>\r\n    <div class=\"tab-pane fade\" id=\"aiModel\">\r\n      <app-ai-model-settings></app-ai-model-settings>\r\n    </div>\r\n    <div class=\"tab-pane fade\" id=\"teamFilters\">\r\n      <!-- Team Filters & Iteration Settings -->\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h5 class=\"mb-0\">Team Filters & Iteration Settings</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <!-- Form for iteration settings -->\r\n          <form>\r\n            <div class=\"mb-4\">\r\n              <h6>Iteration Path Settings</h6>\r\n              \r\n              <!-- Success message -->\r\n              <div *ngIf=\"successMessage\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                {{ successMessage }}\r\n                <button type=\"button\" class=\"btn-close\" (click)=\"successMessage = ''\"></button>\r\n              </div>\r\n              \r\n              <div class=\"form-group mb-3\">\r\n                <label for=\"defaultIterationPath\" class=\"form-label\">Default Iteration Path</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"defaultIterationPath\" \r\n                       placeholder=\"Enter default iteration path (e.g. Techoil\\2.3.23)\"\r\n                       [(ngModel)]=\"defaultIterationPath\" name=\"defaultIterationPath\">\r\n                <small class=\"form-text text-muted\">This iteration path will be used by default in task distribution</small>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveIterationSettings()\">\r\n                  Save Iteration Settings\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <hr>\r\n            \r\n            <!-- Team filter settings -->\r\n            <div class=\"mb-4\">\r\n              <h6>Team Filters</h6>\r\n              <div class=\"form-check form-switch mb-3\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"enableTeamFilter\" \r\n                       [(ngModel)]=\"enableTeamFilter\" name=\"enableTeamFilter\">\r\n                <label class=\"form-check-label\" for=\"enableTeamFilter\">\r\n                  Enable RND Team Filtering for Auto-Assign\r\n                </label>\r\n              </div>\r\n              <div *ngIf=\"enableTeamFilter\" class=\"card bg-light p-3 mb-3\">\r\n                <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                  <div>\r\n                    <label for=\"teamName\" class=\"form-label me-2\">Team Name</label>\r\n                    <input type=\"text\" class=\"form-control d-inline-block w-auto\" \r\n                           id=\"teamName\" [(ngModel)]=\"teamName\" name=\"teamName\" value=\"RND\">\r\n                  </div>\r\n                  <div>\r\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" (click)=\"loadTeamMembers()\">\r\n                      <i class=\"bi bi-arrow-repeat\"></i> Load Team Members\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-sm btn-danger ms-2\" (click)=\"forceReloadTeamMembers()\">\r\n                      <i class=\"bi bi-exclamation-triangle\"></i> Clear & Direct Load\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- Loading indicator -->\r\n                <div *ngIf=\"loadingTeamMembers\" class=\"text-center py-2\">\r\n                  <div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                  <span class=\"ms-2\">Loading team members...</span>\r\n                </div>\r\n                \r\n                <!-- Error message -->\r\n                <div *ngIf=\"teamMembersError\" class=\"alert alert-danger alert-sm\">\r\n                  {{ teamMembersError }}\r\n                </div>\r\n                \r\n                <!-- Team members selection -->\r\n                <div *ngIf=\"!loadingTeamMembers && teamMembers.length > 0\" class=\"mb-3\">\r\n                  <label class=\"form-label d-flex justify-content-between align-items-center\">\r\n                    Select Team Members for Auto-Assignment\r\n                    <button class=\"btn btn-sm btn-primary\" (click)=\"forceReloadTeamMembers()\" [disabled]=\"loadingTeamMembers\">\r\n                      <i class=\"fas fa-sync-alt\"></i> Force Reload\r\n                    </button>\r\n                  </label>\r\n                  <div *ngIf=\"teamMembers.length === 0\" class=\"alert alert-warning\">\r\n                    No team members found for team \"{{teamName}}\". API returned data but filtering may have removed all entries.\r\n                  </div>\r\n                  <div class=\"team-members-list\">\r\n                    <div *ngFor=\"let member of teamMembers\" class=\"form-check mb-2\">\r\n                      <input class=\"form-check-input\" type=\"checkbox\" \r\n                             [id]=\"'member-' + member.id\" \r\n                             [(ngModel)]=\"member.selected\"\r\n                             name=\"teamMember{{member.id}}\">\r\n                      <label class=\"form-check-label\" [for]=\"'member-' + member.id\">\r\n                        {{ member.displayName }}\r\n                        <small class=\"text-muted ms-2\">\r\n                          <span class=\"badge bg-secondary\">{{ member.team }}</span>\r\n                          <span *ngIf=\"member.currentWorkload && member.currentWorkload > 0\" class=\"badge bg-info ms-1\">\r\n                            {{ member.currentWorkload }} tasks\r\n                          </span>\r\n                        </small>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- No team members found -->\r\n                <div *ngIf=\"!loadingTeamMembers && teamMembers.length === 0 && !teamMembersError\" class=\"alert alert-warning\">\r\n                  No team members found. Please check the team name and try again.\r\n                </div>\r\n                \r\n                <!-- Raw API Response for Debugging -->\r\n                <div *ngIf=\"rawApiResponse\" class=\"mt-3\">\r\n                  <h6 class=\"text-danger\">Raw API Response (Debug):</h6>\r\n                  <pre class=\"bg-light p-2\" style=\"max-height: 200px; overflow-y: auto; font-size: 0.8rem;\">{{ rawApiResponse }}</pre>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"form-group\">\r\n                <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveTeamFilterSettings()\">\r\n                  Save Team Filter Settings\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-warning ms-2\" (click)=\"clearLocalStorage()\">\r\n                  Clear Cache & Reload\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}