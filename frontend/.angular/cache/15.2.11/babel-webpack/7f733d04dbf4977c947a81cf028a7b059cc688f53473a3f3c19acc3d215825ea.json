{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"../../../services/settings.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction AiModelSettingsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function AiModelSettingsComponent_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.error = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction AiModelSettingsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function AiModelSettingsComponent_div_6_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.success = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.success, \" \");\n  }\n}\nfunction AiModelSettingsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"span\", 13);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction AiModelSettingsComponent_div_8_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelement(1, \"i\", 29);\n    i0.ɵɵtext(2, \" You can view AI model settings, but you need Admin or Scrum Master role to modify them. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AiModelSettingsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 14)(2, \"div\", 15)(3, \"div\", 16)(4, \"div\", 17)(5, \"label\", 18);\n    i0.ɵɵtext(6, \"Model Endpoint\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 16)(9, \"div\", 17)(10, \"label\", 18);\n    i0.ɵɵtext(11, \"API Key\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 20);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(13, \"div\", 21)(14, \"div\", 22)(15, \"div\", 3)(16, \"div\", 23)(17, \"div\")(18, \"h6\", 2);\n    i0.ɵɵtext(19, \"AI Model Auto-Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"p\", 24);\n    i0.ɵɵtext(21, \" When enabled, the AI model will automatically update with the latest data. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 25)(23, \"input\", 26);\n    i0.ɵɵlistener(\"change\", function AiModelSettingsComponent_div_8_Template_input_change_23_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.toggleAutoUpdate());\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵtemplate(24, AiModelSettingsComponent_div_8_div_24_Template, 3, 0, \"div\", 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"value\", ctx_r3.settings.modelEndpoint);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"checked\", ctx_r3.settings.enableAutoUpdate)(\"disabled\", ctx_r3.loading || !ctx_r3.authService.canEditAiModelSettings());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.authService.canEditAiModelSettings());\n  }\n}\nexport let AiModelSettingsComponent = /*#__PURE__*/(() => {\n  class AiModelSettingsComponent {\n    constructor(authService, settingsService, fb) {\n      this.authService = authService;\n      this.settingsService = settingsService;\n      this.fb = fb;\n      this.settings = null;\n      this.loading = false;\n      this.error = '';\n      this.success = '';\n    }\n    ngOnInit() {\n      this.loadSettings();\n    }\n    loadSettings() {\n      this.loading = true;\n      this.error = '';\n      this.success = '';\n      this.settingsService.getAiModelSettings().subscribe({\n        next: settings => {\n          this.settings = settings;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err.message || 'Failed to load AI model settings';\n          this.loading = false;\n        }\n      });\n    }\n    toggleAutoUpdate() {\n      if (!this.authService.canEditAiModelSettings()) {\n        this.error = 'You do not have permission to update AI model settings';\n        return;\n      }\n      if (!this.settings) {\n        return;\n      }\n      this.loading = true;\n      this.error = '';\n      this.success = '';\n      const newValue = !this.settings.enableAutoUpdate;\n      const request = {\n        enableAutoUpdate: newValue\n      };\n      this.settingsService.updateAiModelSettings(request).subscribe({\n        next: () => {\n          if (this.settings) {\n            this.settings.enableAutoUpdate = newValue;\n          }\n          this.success = `AI Model Auto-Update ${newValue ? 'enabled' : 'disabled'} successfully`;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err.message || 'Failed to update AI model settings';\n          this.loading = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function AiModelSettingsComponent_Factory(t) {\n        return new (t || AiModelSettingsComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AiModelSettingsComponent,\n        selectors: [[\"app-ai-model-settings\"]],\n        decls: 9,\n        vars: 4,\n        consts: [[1, \"card\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"alert alert-danger alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-success alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center mb-3\", 4, \"ngIf\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"alert-dismissible\", \"fade\", \"show\"], [1, \"d-flex\", \"justify-content-center\", \"mb-3\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mb-4\"], [1, \"row\", \"g-3\"], [1, \"col-md-6\"], [1, \"form-group\"], [1, \"form-label\", \"text-muted\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"password\", \"value\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"readonly\", \"\", 1, \"form-control\"], [1, \"mt-4\"], [1, \"card\", \"bg-light\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"text-muted\", \"mb-0\", \"small\"], [1, \"form-check\", \"form-switch\"], [\"type\", \"checkbox\", \"role\", \"switch\", \"id\", \"aiAutoUpdate\", 1, \"form-check-input\", 3, \"checked\", \"disabled\", \"change\"], [\"class\", \"alert alert-info mt-3\", 4, \"ngIf\"], [1, \"alert\", \"alert-info\", \"mt-3\"], [1, \"bi\", \"bi-info-circle\", \"me-2\"]],\n        template: function AiModelSettingsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h5\", 2);\n            i0.ɵɵtext(3, \"AI Model Settings\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"div\", 3);\n            i0.ɵɵtemplate(5, AiModelSettingsComponent_div_5_Template, 3, 1, \"div\", 4);\n            i0.ɵɵtemplate(6, AiModelSettingsComponent_div_6_Template, 3, 1, \"div\", 5);\n            i0.ɵɵtemplate(7, AiModelSettingsComponent_div_7_Template, 4, 0, \"div\", 6);\n            i0.ɵɵtemplate(8, AiModelSettingsComponent_div_8_Template, 25, 4, \"div\", 7);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.success);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.settings);\n          }\n        },\n        dependencies: [i4.NgIf]\n      });\n    }\n  }\n  return AiModelSettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}