{"ast":null,"code":"import { UserRole } from '../../../models/settings.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"../../../services/settings.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction UserRolesComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function UserRolesComponent_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.error = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction UserRolesComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function UserRolesComponent_div_6_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.success = \"\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.success, \" \");\n  }\n}\nfunction UserRolesComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"span\", 24);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction UserRolesComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const role_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", role_r10.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(role_r10.label);\n  }\n}\nfunction UserRolesComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelement(1, \"i\", 27);\n    i0.ɵɵtext(2, \" You do not have permission to view user roles. Contact an administrator. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserRolesComponent_div_24_div_3_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Actions\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserRolesComponent_div_24_div_3_tr_12_td_8_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const role_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", role_r19.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", role_r19.label, \" \");\n  }\n}\nfunction UserRolesComponent_div_24_div_3_tr_12_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"select\", 35);\n    i0.ɵɵlistener(\"ngModelChange\", function UserRolesComponent_div_24_div_3_tr_12_td_8_Template_select_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const user_r16 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(user_r16.role = $event);\n    })(\"ngModelChange\", function UserRolesComponent_div_24_div_3_tr_12_td_8_Template_select_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const user_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r23.updateUserRole(user_r16, $event));\n    });\n    i0.ɵɵtemplate(2, UserRolesComponent_div_24_div_3_tr_12_td_8_option_2_Template, 2, 2, \"option\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", user_r16.role)(\"disabled\", ctx_r17.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r17.roleOptions);\n  }\n}\nfunction UserRolesComponent_div_24_div_3_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"span\", 34);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, UserRolesComponent_div_24_div_3_tr_12_td_8_Template, 3, 3, \"td\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r16 = ctx.$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r16.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r16.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r15.getRoleBadgeClass(user_r16.role));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r16.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r15.authService.canEditUserRoles());\n  }\n}\nfunction UserRolesComponent_div_24_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"table\", 32)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, UserRolesComponent_div_24_div_3_th_10_Template, 2, 0, \"th\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, UserRolesComponent_div_24_div_3_tr_12_Template, 9, 5, \"tr\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.authService.canEditUserRoles());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r11.userRoles);\n  }\n}\nfunction UserRolesComponent_div_24_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"p\", 39);\n    i0.ɵɵtext(2, \"No users found\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserRolesComponent_div_24_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function UserRolesComponent_div_24_div_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.saveAllRoles());\n    });\n    i0.ɵɵelement(2, \"i\", 15);\n    i0.ɵɵtext(3, \" Save All Role Changes \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r13.loading);\n  }\n}\nfunction UserRolesComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\");\n    i0.ɵɵtext(2, \"User Role Assignments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, UserRolesComponent_div_24_div_3_Template, 13, 2, \"div\", 28);\n    i0.ɵɵtemplate(4, UserRolesComponent_div_24_div_4_Template, 3, 0, \"div\", 29);\n    i0.ɵɵtemplate(5, UserRolesComponent_div_24_div_5_Template, 4, 1, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.userRoles.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.userRoles.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.userRoles.length > 0 && ctx_r5.authService.canEditUserRoles());\n  }\n}\nexport class UserRolesComponent {\n  constructor(authService, settingsService, fb) {\n    this.authService = authService;\n    this.settingsService = settingsService;\n    this.fb = fb;\n    this.userRoles = [];\n    this.loading = false;\n    this.error = '';\n    this.success = '';\n    this.defaultRole = UserRole.Member; // Default role for new users\n    // Role options for dropdown\n    this.roleOptions = [{\n      value: UserRole.Admin,\n      label: 'Admin'\n    }, {\n      value: UserRole.ScrumMaster,\n      label: 'Scrum Master'\n    }, {\n      value: UserRole.Member,\n      label: 'Member'\n    }, {\n      value: UserRole.Viewer,\n      label: 'Viewer'\n    }];\n  }\n  ngOnInit() {\n    this.loadUserRoles();\n    this.loadDefaultRole();\n  }\n  loadUserRoles() {\n    if (!this.authService.canViewUserRoles()) {\n      this.error = 'You do not have permission to view user roles';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n    this.settingsService.getUserRoles().subscribe({\n      next: roles => {\n        this.userRoles = roles;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Error loading user roles:', err);\n        this.error = err.message || 'Failed to load user roles';\n        this.loading = false;\n      }\n    });\n  }\n  loadDefaultRole() {\n    // Load default role from settings service or localStorage\n    const savedDefaultRole = localStorage.getItem('defaultUserRole');\n    if (savedDefaultRole) {\n      this.defaultRole = savedDefaultRole;\n    }\n  }\n  saveDefaultRole() {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change default role';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    // Save to localStorage for demo purposes\n    localStorage.setItem('defaultUserRole', this.defaultRole);\n    // Simulate API call\n    setTimeout(() => {\n      this.loading = false;\n      this.success = `Default role has been set to ${this.defaultRole}`;\n    }, 500);\n  }\n  saveAllRoles() {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change user roles';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n    // Simulate an API call with a timeout\n    setTimeout(() => {\n      this.loading = false;\n      this.success = 'Successfully saved all role changes';\n    }, 800);\n  }\n  updateUserRole(user, newRole) {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change user roles';\n      return;\n    }\n    if (user.role === newRole) {\n      return; // No change needed\n    }\n\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n    const request = {\n      userId: user.userId,\n      role: newRole\n    };\n    this.settingsService.updateUserRole(request).subscribe({\n      next: () => {\n        user.role = newRole; // Update locally\n        this.success = `Successfully updated ${user.userName}'s role to ${newRole}`;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Error updating user role:', err);\n        this.error = err.message || 'Failed to update user role';\n        this.loading = false;\n      }\n    });\n  }\n  getRoleBadgeClass(role) {\n    switch (role) {\n      case UserRole.Admin:\n        return 'badge bg-danger';\n      case UserRole.ScrumMaster:\n        return 'badge bg-warning text-dark';\n      case UserRole.Member:\n        return 'badge bg-info text-dark';\n      case UserRole.Viewer:\n        return 'badge bg-secondary';\n      default:\n        return 'badge bg-secondary';\n    }\n  }\n  static {\n    this.ɵfac = function UserRolesComponent_Factory(t) {\n      return new (t || UserRolesComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserRolesComponent,\n      selectors: [[\"app-user-roles\"]],\n      decls: 25,\n      vars: 9,\n      consts: [[1, \"card\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"alert alert-danger alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-success alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center mb-3\", 4, \"ngIf\"], [1, \"mb-4\"], [1, \"form-group\"], [\"for\", \"defaultRole\", 1, \"form-label\"], [\"id\", \"defaultRole\", 1, \"form-select\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-text\", \"text-muted\"], [1, \"mt-3\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"bi\", \"bi-check-circle\", \"me-1\"], [1, \"my-4\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"alert-dismissible\", \"fade\", \"show\"], [1, \"d-flex\", \"justify-content-center\", \"mb-3\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [3, \"value\"], [1, \"alert\", \"alert-warning\"], [1, \"bi\", \"bi-lock-fill\", \"me-2\"], [\"class\", \"table-responsive mt-3\", 4, \"ngIf\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [1, \"table-responsive\", \"mt-3\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\"], [1, \"form-select\", \"form-select-sm\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngValue\"], [1, \"text-center\", \"py-4\"], [1, \"text-muted\"]],\n      template: function UserRolesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h5\", 2);\n          i0.ɵɵtext(3, \"User Role Management\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3);\n          i0.ɵɵtemplate(5, UserRolesComponent_div_5_Template, 3, 1, \"div\", 4);\n          i0.ɵɵtemplate(6, UserRolesComponent_div_6_Template, 3, 1, \"div\", 5);\n          i0.ɵɵtemplate(7, UserRolesComponent_div_7_Template, 4, 0, \"div\", 6);\n          i0.ɵɵelementStart(8, \"div\", 7)(9, \"h6\");\n          i0.ɵɵtext(10, \"Default Role Settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\", 9);\n          i0.ɵɵtext(13, \"Default Role for New Users\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"select\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function UserRolesComponent_Template_select_ngModelChange_14_listener($event) {\n            return ctx.defaultRole = $event;\n          });\n          i0.ɵɵtemplate(15, UserRolesComponent_option_15_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"small\", 12);\n          i0.ɵɵtext(17, \"This role will be assigned to new users by default\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 13)(19, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function UserRolesComponent_Template_button_click_19_listener() {\n            return ctx.saveDefaultRole();\n          });\n          i0.ɵɵelement(20, \"i\", 15);\n          i0.ɵɵtext(21, \" Save Default Role \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(22, \"hr\", 16);\n          i0.ɵɵtemplate(23, UserRolesComponent_div_23_Template, 3, 0, \"div\", 17);\n          i0.ɵɵtemplate(24, UserRolesComponent_div_24_Template, 6, 3, \"div\", 18);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.success);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.defaultRole)(\"disabled\", !ctx.authService.canEditUserRoles());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.roleOptions);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.loading || !ctx.authService.canEditUserRoles());\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", !ctx.authService.canViewUserRoles() && !ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.authService.canViewUserRoles() && !ctx.loading);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n      styles: [\".table[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  background-color: #eef2ff;\\n  margin-bottom: 0;\\n}\\n.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] {\\n  position: sticky;\\n  top: 0;\\n  background-color: #c5cae9;\\n  z-index: 1;\\n}\\n.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  color: #3949ab;\\n  text-transform: uppercase;\\n  font-size: 0.75rem;\\n  letter-spacing: 0.5px;\\n  padding-top: 12px;\\n  padding-bottom: 12px;\\n  border-top: none;\\n  border-bottom: 2px solid #9fa8da;\\n}\\n.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] {\\n  transition: background-color 0.2s;\\n  background-color: #e8eaf6;\\n}\\n.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) {\\n  background-color: #d1d9ff;\\n}\\n.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover {\\n  background-color: #c5cae9;\\n}\\n.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  vertical-align: middle;\\n  padding: 0.75rem;\\n  border-color: #c5cae9;\\n}\\n\\n.table-responsive[_ngcontent-%COMP%] {\\n  max-height: 450px;\\n  overflow-y: auto;\\n  background-color: #eef2ff;\\n  border-radius: 0.375rem;\\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\\n}\\n\\n.role-badge[_ngcontent-%COMP%] {\\n  padding: 0.35em 0.65em;\\n  font-size: 0.75em;\\n  font-weight: 600;\\n  border-radius: 0.375rem;\\n}\\n.role-badge.admin[_ngcontent-%COMP%] {\\n  background-color: #673ab7;\\n  color: white;\\n}\\n.role-badge.developer[_ngcontent-%COMP%] {\\n  background-color: #2196f3;\\n  color: white;\\n}\\n.role-badge.qa[_ngcontent-%COMP%] {\\n  background-color: #4caf50;\\n  color: white;\\n}\\n.role-badge.viewer[_ngcontent-%COMP%] {\\n  background-color: #9e9e9e;\\n  color: white;\\n}\\n\\n.role-select[_ngcontent-%COMP%] {\\n  min-width: 140px;\\n}\\n\\n.default-role-alert[_ngcontent-%COMP%] {\\n  background-color: #e8f4fd;\\n  border-left: 4px solid #2196f3;\\n  padding: 1rem;\\n  margin-bottom: 1.5rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZXR0aW5ncy91c2VyLXJvbGVzL3VzZXItcm9sZXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsZ0NBQUE7QUFDQTtFQUNFLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtBQUNGO0FBQ0U7RUFDRSxnQkFBQTtFQUNBLE1BQUE7RUFDQSx5QkFBQTtFQUNBLFVBQUE7QUFDSjtBQUNJO0VBQ0UsZ0JBQUE7RUFDQSxjQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsaUJBQUE7RUFDQSxvQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0NBQUE7QUFDTjtBQUdFO0VBQ0UsaUNBQUE7RUFDQSx5QkFBQTtBQURKO0FBR0k7RUFDRSx5QkFBQTtBQUROO0FBSUk7RUFDRSx5QkFBQTtBQUZOO0FBS0k7RUFDRSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EscUJBQUE7QUFITjs7QUFRQTtFQUNFLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtFQUNBLHVCQUFBO0VBQ0EseUNBQUE7QUFMRjs7QUFRQTtFQUNFLHNCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0FBTEY7QUFPRTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtBQUxKO0FBUUU7RUFDRSx5QkFBQTtFQUNBLFlBQUE7QUFOSjtBQVNFO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0FBUEo7QUFVRTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtBQVJKOztBQVlBO0VBQ0UsZ0JBQUE7QUFURjs7QUFZQTtFQUNFLHlCQUFBO0VBQ0EsOEJBQUE7RUFDQSxhQUFBO0VBQ0EscUJBQUE7QUFURiIsInNvdXJjZXNDb250ZW50IjpbIi8qIFVzZXIgcm9sZXMgY29tcG9uZW50IHN0eWxlcyAqL1xyXG4udGFibGUge1xyXG4gIGZvbnQtc2l6ZTogMC45cmVtO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWYyZmY7XHJcbiAgbWFyZ2luLWJvdHRvbTogMDtcclxuICBcclxuICB0aGVhZCB7XHJcbiAgICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gICAgdG9wOiAwO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2M1Y2FlOTtcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgICBcclxuICAgIHRoIHtcclxuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgY29sb3I6ICMzOTQ5YWI7XHJcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcclxuICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xyXG4gICAgICBwYWRkaW5nLXRvcDogMTJweDtcclxuICAgICAgcGFkZGluZy1ib3R0b206IDEycHg7XHJcbiAgICAgIGJvcmRlci10b3A6IG5vbmU7XHJcbiAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjOWZhOGRhO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICB0Ym9keSB0ciB7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZThlYWY2O1xyXG4gICAgXHJcbiAgICAmOm50aC1jaGlsZChldmVuKSB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkMWQ5ZmY7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICY6aG92ZXIge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzVjYWU5O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0ZCB7XHJcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgIHBhZGRpbmc6IDAuNzVyZW07XHJcbiAgICAgIGJvcmRlci1jb2xvcjogI2M1Y2FlOTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi50YWJsZS1yZXNwb25zaXZlIHtcclxuICBtYXgtaGVpZ2h0OiA0NTBweDtcclxuICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWYyZmY7XHJcbiAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07XHJcbiAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7XHJcbn1cclxuXHJcbi5yb2xlLWJhZGdlIHtcclxuICBwYWRkaW5nOiAwLjM1ZW0gMC42NWVtO1xyXG4gIGZvbnQtc2l6ZTogMC43NWVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07XHJcbiAgXHJcbiAgJi5hZG1pbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjczYWI3O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuICBcclxuICAmLmRldmVsb3BlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuICBcclxuICAmLnFhIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0Y2FmNTA7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgfVxyXG4gIFxyXG4gICYudmlld2VyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM5ZTllOWU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgfVxyXG59XHJcblxyXG4ucm9sZS1zZWxlY3Qge1xyXG4gIG1pbi13aWR0aDogMTQwcHg7XHJcbn1cclxuXHJcbi5kZWZhdWx0LXJvbGUtYWxlcnQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlOGY0ZmQ7XHJcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjE5NmYzO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xyXG59ICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["UserRole","i0","UserRolesComponent","constructor","authService","settingsService","fb","Member","value","Admin","label","ScrumMaster","Viewer","ngOnInit","loadUserRoles","loadDefaultRole","canViewUserRoles","error","loading","success","getUserRoles","subscribe","next","roles","userRoles","err","console","message","savedDefaultRole","localStorage","getItem","defaultRole","saveDefaultRole","canEditUserRoles","setItem","setTimeout","saveAllRoles","updateUserRole","user","newRole","role","request","userId","userName","getRoleBadgeClass","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\user-roles\\user-roles.component.ts","E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\settings\\user-roles\\user-roles.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { AuthService } from '../../../services/auth.service';\nimport { SettingsService } from '../../../services/settings.service';\nimport { UserRole, UserRoleDto, UpdateUserRoleRequest } from '../../../models/settings.model';\n\n@Component({\n  selector: 'app-user-roles',\n  templateUrl: './user-roles.component.html',\n  styleUrls: ['./user-roles.component.scss']\n})\nexport class UserRolesComponent implements OnInit {\n  userRoles: UserRoleDto[] = [];\n  loading = false;\n  error = '';\n  success = '';\n  defaultRole = UserRole.Member; // Default role for new users\n  \n  // Role options for dropdown\n  roleOptions = [\n    { value: UserRole.Admin, label: 'Admin' },\n    { value: UserRole.ScrumMaster, label: 'Scrum Master' },\n    { value: UserRole.Member, label: 'Member' },\n    { value: UserRole.Viewer, label: 'Viewer' }\n  ];\n\n  constructor(\n    public authService: AuthService,\n    private settingsService: SettingsService,\n    private fb: FormBuilder\n  ) { }\n\n  ngOnInit(): void {\n    this.loadUserRoles();\n    this.loadDefaultRole();\n  }\n\n  loadUserRoles(): void {\n    if (!this.authService.canViewUserRoles()) {\n      this.error = 'You do not have permission to view user roles';\n      return;\n    }\n\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n\n    this.settingsService.getUserRoles().subscribe({\n      next: (roles) => {\n        this.userRoles = roles;\n        this.loading = false;\n      },\n      error: (err) => {\n        console.error('Error loading user roles:', err);\n        this.error = err.message || 'Failed to load user roles';\n        this.loading = false;\n      }\n    });\n  }\n\n  loadDefaultRole(): void {\n    // Load default role from settings service or localStorage\n    const savedDefaultRole = localStorage.getItem('defaultUserRole');\n    if (savedDefaultRole) {\n      this.defaultRole = savedDefaultRole as UserRole;\n    }\n  }\n\n  saveDefaultRole(): void {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change default role';\n      return;\n    }\n\n    this.loading = true;\n    this.error = '';\n    \n    // Save to localStorage for demo purposes\n    localStorage.setItem('defaultUserRole', this.defaultRole);\n    \n    // Simulate API call\n    setTimeout(() => {\n      this.loading = false;\n      this.success = `Default role has been set to ${this.defaultRole}`;\n    }, 500);\n  }\n\n  saveAllRoles(): void {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change user roles';\n      return;\n    }\n\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n\n    // Simulate an API call with a timeout\n    setTimeout(() => {\n      this.loading = false;\n      this.success = 'Successfully saved all role changes';\n    }, 800);\n  }\n\n  updateUserRole(user: UserRoleDto, newRole: UserRole): void {\n    if (!this.authService.canEditUserRoles()) {\n      this.error = 'You do not have permission to change user roles';\n      return;\n    }\n\n    if (user.role === newRole) {\n      return; // No change needed\n    }\n\n    this.loading = true;\n    this.error = '';\n    this.success = '';\n\n    const request: UpdateUserRoleRequest = {\n      userId: user.userId,\n      role: newRole\n    };\n\n    this.settingsService.updateUserRole(request).subscribe({\n      next: () => {\n        user.role = newRole; // Update locally\n        this.success = `Successfully updated ${user.userName}'s role to ${newRole}`;\n        this.loading = false;\n      },\n      error: (err) => {\n        console.error('Error updating user role:', err);\n        this.error = err.message || 'Failed to update user role';\n        this.loading = false;\n      }\n    });\n  }\n\n  getRoleBadgeClass(role: UserRole): string {\n    switch (role) {\n      case UserRole.Admin:\n        return 'badge bg-danger';\n      case UserRole.ScrumMaster:\n        return 'badge bg-warning text-dark';\n      case UserRole.Member:\n        return 'badge bg-info text-dark';\n      case UserRole.Viewer:\n        return 'badge bg-secondary';\n      default:\n        return 'badge bg-secondary';\n    }\n  }\n} ","<div class=\"card\">\n  <div class=\"card-header\">\n    <h5 class=\"mb-0\">User Role Management</h5>\n  </div>\n  <div class=\"card-body\">\n    <!-- Error and success alerts -->\n    <div *ngIf=\"error\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n      {{ error }}\n      <button type=\"button\" class=\"btn-close\" (click)=\"error = ''\"></button>\n    </div>\n    \n    <div *ngIf=\"success\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n      {{ success }}\n      <button type=\"button\" class=\"btn-close\" (click)=\"success = ''\"></button>\n    </div>\n\n    <!-- Loading state -->\n    <div *ngIf=\"loading\" class=\"d-flex justify-content-center mb-3\">\n      <div class=\"spinner-border text-primary\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- Default role selection -->\n    <div class=\"mb-4\">\n      <h6>Default Role Settings</h6>\n      <div class=\"form-group\">\n        <label for=\"defaultRole\" class=\"form-label\">Default Role for New Users</label>\n        <select id=\"defaultRole\" class=\"form-select\" [(ngModel)]=\"defaultRole\" [disabled]=\"!authService.canEditUserRoles()\">\n          <option *ngFor=\"let role of roleOptions\" [value]=\"role.value\">{{ role.label }}</option>\n        </select>\n        <small class=\"form-text text-muted\">This role will be assigned to new users by default</small>\n      </div>\n      <div class=\"mt-3\">\n        <button class=\"btn btn-primary\" (click)=\"saveDefaultRole()\" [disabled]=\"loading || !authService.canEditUserRoles()\">\n          <i class=\"bi bi-check-circle me-1\"></i> Save Default Role\n        </button>\n      </div>\n    </div>\n\n    <hr class=\"my-4\">\n\n    <!-- No permission message -->\n    <div *ngIf=\"!authService.canViewUserRoles() && !loading\" class=\"alert alert-warning\">\n      <i class=\"bi bi-lock-fill me-2\"></i>\n      You do not have permission to view user roles. Contact an administrator.\n    </div>\n\n    <!-- User roles table -->\n    <div *ngIf=\"authService.canViewUserRoles() && !loading\">\n      <h6>User Role Assignments</h6>\n      <div *ngIf=\"userRoles.length > 0\" class=\"table-responsive mt-3\">\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Role</th>\n              <th *ngIf=\"authService.canEditUserRoles()\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let user of userRoles\">\n              <td>{{ user.userName }}</td>\n              <td>{{ user.email }}</td>\n              <td>\n                <span [ngClass]=\"getRoleBadgeClass(user.role)\">{{ user.role }}</span>\n              </td>\n              <td *ngIf=\"authService.canEditUserRoles()\">\n                <select class=\"form-select form-select-sm\" \n                        [(ngModel)]=\"user.role\" \n                        (ngModelChange)=\"updateUserRole(user, $event)\"\n                        [disabled]=\"loading\">\n                  <option *ngFor=\"let role of roleOptions\" [ngValue]=\"role.value\">\n                    {{ role.label }}\n                  </option>\n                </select>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- Empty state -->\n      <div *ngIf=\"userRoles.length === 0\" class=\"text-center py-4\">\n        <p class=\"text-muted\">No users found</p>\n      </div>\n\n      <!-- Save all roles button -->\n      <div class=\"mt-3\" *ngIf=\"userRoles.length > 0 && authService.canEditUserRoles()\">\n        <button class=\"btn btn-primary\" (click)=\"saveAllRoles()\" [disabled]=\"loading\">\n          <i class=\"bi bi-check-circle me-1\"></i> Save All Role Changes\n        </button>\n      </div>\n    </div>\n  </div>\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}