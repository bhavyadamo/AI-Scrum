{"ast":null,"code":"import { of } from 'rxjs';\nimport { catchError, finalize, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/dashboard.service\";\nimport * as i2 from \"../../services/azure-devops.service\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"stateDistributionChart\"];\nconst _c1 = [\"iterationDistributionChart\"];\nconst _c2 = [\"statusPieChart\"];\nfunction DashboardComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_li_18_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const iteration_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.selectIterationPath(iteration_r12));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const iteration_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(iteration_r12);\n  }\n}\nfunction DashboardComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"div\", 36)(2, \"span\", 37);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.error.sprint, \" \");\n  }\n}\nfunction DashboardComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 39);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 40)(4, \"div\")(5, \"p\", 41);\n    i0.ɵɵtext(6, \"Start Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 42);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\")(11, \"p\", 41);\n    i0.ɵɵtext(12, \"End Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\", 42);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\")(17, \"p\", 41);\n    i0.ɵɵtext(18, \"Days Remaining\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 43);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.sprintOverview.sprintName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 4, ctx_r3.sprintOverview.startDate, \"mediumDate\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 7, ctx_r3.sprintOverview.endDate, \"mediumDate\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r3.sprintOverview.daysRemaining);\n  }\n}\nfunction DashboardComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\", 44);\n    i0.ɵɵtext(2, \"Ask me anything about your project or tasks.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 45);\n    i0.ɵɵtext(4, \"Examples:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ul\", 46)(6, \"li\");\n    i0.ɵɵtext(7, \"How many tasks are in the current sprint?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"li\");\n    i0.ɵɵtext(9, \"Show me tasks assigned to John\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"li\");\n    i0.ɵɵtext(11, \"Assign task #1234 to Sarah\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nconst _c3 = function (a0, a1) {\n  return {\n    \"user-message\": a0,\n    \"assistant-message\": a1\n  };\n};\nfunction DashboardComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 47)(1, \"div\", 48)(2, \"div\", 49);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 50);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const msg_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(6, _c3, msg_r15.role === \"user\", msg_r15.role === \"assistant\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(msg_r15.content);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 3, msg_r15.timestamp, \"shortTime\"));\n  }\n}\nfunction DashboardComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"div\", 36)(2, \"span\", 37);\n    i0.ɵɵtext(3, \"Loading work item data...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 51);\n    i0.ɵɵtext(5, \"Fetching real-time work item counts from API...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r7.taskDetailsError, \" \");\n  }\n}\nfunction DashboardComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\", 44);\n    i0.ɵɵtext(2, \"No work item state data available. Please select an iteration and click Search.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardComponent_div_51_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54)(1, \"div\", 55)(2, \"div\", 56)(3, \"h1\", 57);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 58);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 58);\n    i0.ɵɵtext(8, \"Work Items\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const status_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", status_r17.color);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(status_r17.count);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(status_r17.status);\n  }\n}\nfunction DashboardComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵtemplate(1, DashboardComponent_div_51_div_1_Template, 9, 4, \"div\", 53);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.taskStatusBoard);\n  }\n}\nfunction DashboardComponent_div_57_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"div\", 61)(2, \"div\", 62)(3, \"div\", 63)(4, \"h5\", 64);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 65);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 66);\n    i0.ɵɵelement(9, \"div\", 67);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const typeItem_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"border-left-color\", typeItem_r19.color);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(typeItem_r19.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", typeItem_r19.color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(typeItem_r19.count);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", typeItem_r19.count / ctx_r18.getTotalWorkItems() * 100, \"%\")(\"background-color\", typeItem_r19.color);\n  }\n}\nfunction DashboardComponent_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵtemplate(1, DashboardComponent_div_57_div_1_Template, 10, 10, \"div\", 59);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.tasksByType);\n  }\n}\nfunction DashboardComponent_div_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\", 44);\n    i0.ɵɵtext(2, \"No work item type data available.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class DashboardComponent {\n  constructor(dashboardService, azureDevOpsService, http) {\n    this.dashboardService = dashboardService;\n    this.azureDevOpsService = azureDevOpsService;\n    this.http = http;\n    this.sprintOverview = null;\n    this.sprintSummary = null;\n    this.activityFeed = null;\n    this.dailyTip = '';\n    this.workItemDistribution = null;\n    this.stateDistributions = [];\n    this.longTermDevNewItems = [];\n    this.supportItems = [];\n    this.aiTips = null;\n    // Define state colors for consistency\n    this.stateColors = {\n      'Proposed': '#e6e6e6',\n      'New': '#b4d7a8',\n      'Dev-New': '#b4d7a8',\n      'Active': '#4a86e8',\n      'Dev-WIP': '#4a86e8',\n      'In Progress': '#4a86e8',\n      'Resolved': '#ffd966',\n      'Code Review': '#9fc5e8',\n      'QA': '#d5a6bd',\n      'Testing': '#d5a6bd',\n      'Done': '#93c47d',\n      'Closed': '#6aa84f',\n      'Completed': '#6aa84f',\n      'Blocked': '#e06666',\n      'Removed': '#999999'\n    };\n    // Default chart colors if state not found in mapping\n    this.defaultChartColors = ['#4a86e8', '#6aa84f', '#ffd966', '#e06666', '#9fc5e8', '#d5a6bd', '#b4d7a8', '#e6e6e6', '#93c47d', '#6fa8dc'];\n    // Properties for the new task board\n    this.taskStatusBoard = [];\n    // Properties for task details\n    this.loadingTaskDetails = false;\n    this.taskDetailsError = '';\n    this.tasksByStatus = [];\n    // Chat properties\n    this.chatMessages = [];\n    this.currentMessage = '';\n    // Define status colors based on Azure DevOps board from the image\n    this.statusColors = {\n      'PMG - Proposed': '#e0e0e0',\n      'DEV - Yet to Start': '#9a9a9a',\n      'DEV - WIP': '#0078d4',\n      'DEV - Code Review': '#324e93',\n      'DEV - Done': '#00b7c3',\n      'DEV/QC - Reopened': '#e81123',\n      'Clarifications': '#fff100',\n      'On Hold': '#e3008c',\n      'QC - In Test Bed': '#8764b8',\n      'Completed': '#107c10'\n    };\n    // Track loading and error states\n    this.loading = {\n      sprint: true,\n      summary: true,\n      activity: true,\n      tip: true,\n      distribution: true,\n      stateDistribution: true,\n      longTermDevNew: true,\n      supportItems: true,\n      aiTips: true,\n      taskStatusBoard: true\n    };\n    this.error = {\n      sprint: '',\n      summary: '',\n      activity: '',\n      tip: '',\n      distribution: '',\n      stateDistribution: '',\n      longTermDevNew: '',\n      supportItems: '',\n      aiTips: '',\n      taskStatusBoard: ''\n    };\n    // Starting with a default Iteration Path that can be changed\n    this.selectedIterationPath = 'Techoil\\\\2.3.23';\n    this.availableIterationPaths = ['Techoil\\\\2.3.23', 'Techoil\\\\2.3.22', 'Techoil\\\\2.3.21', 'Techoil\\\\2.3.19', 'Techoil\\\\2.3.2', '@CurrentIteration', '@CurrentIteration + 1', '@CurrentIteration - 1', 'Techoil'];\n    this.filteredIterationPaths = [];\n    this.iterationFilter = '';\n    // Work item status counts from Azure DevOps\n    this.azureDevOpsWorkItems = [];\n    this.workItemCounts = {\n      totalTasks: 0,\n      devNew: 0,\n      inProgress: 0,\n      codeReview: 0,\n      devComplete: 0,\n      completed: 0,\n      blocked: 0\n    };\n    // Assignee distribution data\n    this.assigneeDistribution = {};\n    // Loading and error states\n    this.loadingAzureDevOps = false;\n    this.azureDevOpsError = '';\n    // Stats grouping for types and statuses\n    this.tasksByType = [];\n  }\n  ngOnInit() {\n    this.filteredIterationPaths = [...this.availableIterationPaths];\n    this.loadDashboardData();\n  }\n  ngAfterViewInit() {\n    // Charts will be initialized after data is loaded\n  }\n  loadDashboardData() {\n    this.loadSprintOverview();\n    this.loadAiTips();\n    // Load Azure DevOps data for the initial iteration path\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    this.loadTaskStatusBoard();\n  }\n  loadIterationData() {\n    // Validate iteration path\n    if (!this.selectedIterationPath) {\n      return;\n    }\n    // Trim whitespace and ensure consistent formatting\n    this.selectedIterationPath = this.selectedIterationPath.trim();\n    // Reset loading and error states\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    // Load Azure DevOps work items directly first to get live data\n    this.loadAzureDevOpsWorkItemsWithWiql();\n    // Load other dashboard data\n    this.loadSprintSummary(this.selectedIterationPath);\n    this.loadTaskStatusBoard();\n    // Update available paths if this is a new one\n    if (!this.availableIterationPaths.includes(this.selectedIterationPath)) {\n      this.availableIterationPaths.push(this.selectedIterationPath);\n    }\n  }\n  loadSprintOverview() {\n    this.loading.sprint = true;\n    this.dashboardService.getCurrentSprint().subscribe({\n      next: data => {\n        this.sprintOverview = data;\n        // Use hard-coded iteration path instead of data.iterationPath\n        // this.selectedIterationPath = data.iterationPath;\n        this.loading.sprint = false;\n        this.loadSprintSummary(this.selectedIterationPath);\n        this.loadActivityFeed();\n        this.loadWorkItemDistribution(this.selectedIterationPath);\n        this.loadStateDistributions();\n      },\n      error: err => {\n        this.error.sprint = 'Failed to load sprint data';\n        this.loading.sprint = false;\n        console.error('Error loading sprint data:', err);\n      }\n    });\n  }\n  loadSprintSummary(iterationPath) {\n    this.loading.summary = true;\n    this.dashboardService.getSprintSummary(iterationPath).subscribe({\n      next: data => {\n        this.sprintSummary = data;\n        this.loading.summary = false;\n      },\n      error: err => {\n        this.error.summary = 'Failed to load summary data';\n        this.loading.summary = false;\n        console.error('Error loading summary data:', err);\n      }\n    });\n  }\n  loadActivityFeed() {\n    this.loading.activity = true;\n    this.dashboardService.getActivityFeed().subscribe({\n      next: data => {\n        this.activityFeed = data;\n        this.loading.activity = false;\n      },\n      error: err => {\n        this.error.activity = 'Failed to load activity feed';\n        this.loading.activity = false;\n        console.error('Error loading activity feed:', err);\n      }\n    });\n  }\n  loadDailyTip() {\n    this.loading.tip = true;\n    this.dashboardService.getDailyTip().subscribe({\n      next: data => {\n        this.dailyTip = data.tip;\n        this.loading.tip = false;\n      },\n      error: err => {\n        this.error.tip = 'Failed to load daily tip';\n        this.loading.tip = false;\n        console.error('Error loading daily tip:', err);\n      }\n    });\n  }\n  loadWorkItemDistribution(iterationPath) {\n    this.loading.distribution = true;\n    this.dashboardService.getWorkItemDistribution(iterationPath).subscribe({\n      next: data => {\n        this.workItemDistribution = data;\n        this.loading.distribution = false;\n        // Initialize distribution chart after data is loaded\n        setTimeout(() => {\n          this.initializeWorkItemDistributionChart();\n        }, 100);\n      },\n      error: err => {\n        this.error.distribution = 'Failed to load work item distribution';\n        this.loading.distribution = false;\n        console.error('Error loading work item distribution:', err);\n      }\n    });\n  }\n  loadStateDistributions() {\n    this.loading.stateDistribution = true;\n    this.dashboardService.getStateDistribution(this.selectedIterationPath).subscribe({\n      next: data => {\n        this.stateDistributions = data;\n        // Keep hard-coded iteration paths instead of dynamically loading them\n        // this.availableIterationPaths = data.map(d => d.iterationPath);\n        this.loading.stateDistribution = false;\n        // Initialize state distribution chart after data is loaded\n        setTimeout(() => {\n          this.initializeStateDistributionsChart();\n        }, 100);\n      },\n      error: err => {\n        this.error.stateDistribution = 'Failed to load state distributions';\n        this.loading.stateDistribution = false;\n        console.error('Error loading state distributions:', err);\n      }\n    });\n  }\n  loadLongTermDevNewItems() {\n    this.loading.longTermDevNew = true;\n    this.dashboardService.getLongTermDevNewItems(5).subscribe({\n      next: data => {\n        this.longTermDevNewItems = data;\n        this.loading.longTermDevNew = false;\n      },\n      error: err => {\n        this.error.longTermDevNew = 'Failed to load long-term Dev-New items';\n        this.loading.longTermDevNew = false;\n        console.error('Error loading long-term Dev-New items:', err);\n      }\n    });\n  }\n  loadSupportItems() {\n    this.loading.supportItems = true;\n    this.dashboardService.getSupportItems(6).subscribe({\n      next: data => {\n        this.supportItems = data;\n        this.loading.supportItems = false;\n      },\n      error: err => {\n        this.error.supportItems = 'Failed to load support items';\n        this.loading.supportItems = false;\n        console.error('Error loading support items:', err);\n      }\n    });\n  }\n  loadAiTips() {\n    this.loading.aiTips = true;\n    this.dashboardService.getAiTips().subscribe({\n      next: data => {\n        this.aiTips = data;\n        this.longTermDevNewItems = data.longTermDevNewItems;\n        this.supportItems = data.supportItems;\n        this.dailyTip = data.tip;\n        this.loading.aiTips = false;\n      },\n      error: err => {\n        this.error.aiTips = 'Failed to load AI tips';\n        this.loading.aiTips = false;\n        console.error('Error loading AI tips:', err);\n        // Fall back to individual methods\n        this.loadDailyTip();\n        this.loadLongTermDevNewItems();\n        this.loadSupportItems();\n      }\n    });\n  }\n  initializeWorkItemDistributionChart() {\n    if (!this.workItemDistribution || !this.stateDistributionChartRef?.nativeElement) {\n      return;\n    }\n    // Get canvas element\n    const ctx = this.stateDistributionChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    const labels = this.workItemDistribution.states.map(s => s.state);\n    const data = this.workItemDistribution.states.map(s => s.count);\n    const colors = this.workItemDistribution.states.map(s => this.stateColors[s.state] || this.getRandomColor());\n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            data: data,\n            backgroundColor: colors,\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right'\n            },\n            title: {\n              display: true,\n              text: `Work Item States - ${this.workItemDistribution.iterationPath}`\n            }\n          }\n        }\n      });\n    }\n  }\n  initializeStateDistributionsChart() {\n    if (this.stateDistributions.length === 0 || !this.iterationDistributionChartRef?.nativeElement) {\n      return;\n    }\n    // Get canvas element\n    const ctx = this.iterationDistributionChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    // Prepare data for stacked bar chart\n    const iterationLabels = this.stateDistributions.map(d => d.iterationPath);\n    // Find all unique states across all iterations\n    const allStates = new Set();\n    this.stateDistributions.forEach(dist => {\n      dist.states.forEach(state => {\n        allStates.add(state.state);\n      });\n    });\n    // Create datasets, one for each state\n    const datasets = Array.from(allStates).map(stateName => {\n      // Find color for this state\n      const stateColor = this.stateColors[stateName] || this.getRandomColor();\n      // Create dataset for this state across all iterations\n      return {\n        label: stateName,\n        data: this.stateDistributions.map(dist => {\n          const stateData = dist.states.find(s => s.state === stateName);\n          return stateData ? stateData.count : 0;\n        }),\n        backgroundColor: stateColor\n      };\n    });\n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: iterationLabels,\n          datasets: datasets\n        },\n        options: {\n          responsive: true,\n          scales: {\n            x: {\n              stacked: true\n            },\n            y: {\n              stacked: true,\n              beginAtZero: true\n            }\n          },\n          plugins: {\n            legend: {\n              position: 'right'\n            },\n            title: {\n              display: true,\n              text: 'Work Item Distribution by Iteration'\n            }\n          }\n        }\n      });\n    }\n  }\n  changeIterationPath(iterationPath) {\n    // Even with hardcoded path, keep the method in case it's called from elsewhere\n    if (iterationPath !== this.selectedIterationPath) {\n      this.selectedIterationPath = iterationPath;\n      this.loadWorkItemDistribution(iterationPath);\n      this.loadSprintSummary(iterationPath);\n    }\n  }\n  getStateColor(state) {\n    return this.stateColors[state] || this.getRandomColor();\n  }\n  getRandomColor() {\n    const randomIndex = Math.floor(Math.random() * this.defaultChartColors.length);\n    return this.defaultChartColors[randomIndex];\n  }\n  reload() {\n    this.loadDashboardData();\n  }\n  loadTaskStatusBoard() {\n    this.loading.taskStatusBoard = true;\n    this.error.taskStatusBoard = '';\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    // Define the expected status order to match the image\n    const expectedStatuses = ['PMG - Proposed', 'DEV - Yet to Start', 'DEV - WIP', 'DEV - Code Review', 'DEV - Done', 'DEV/QC - Reopened'];\n    // Type colors for visualization\n    const typeColors = {\n      'Bug': '#e74c3c',\n      'Requirement': '#3498db',\n      'Change Request': '#2ecc71',\n      'Task': '#f39c12',\n      'Epic': '#9b59b6',\n      'User Story': '#1abc9c'\n    };\n    // Use the direct API endpoint as specified\n    const encodedPath = encodeURIComponent(this.selectedIterationPath).replace(/%5C/g, '%255C');\n    const url = `http://localhost:5000/api/tasks?iterationPath=${encodedPath}`;\n    this.http.get(url).pipe(finalize(() => {\n      this.loading.taskStatusBoard = false;\n      this.loadingTaskDetails = false;\n    })).subscribe({\n      next: workItems => {\n        if (workItems && workItems.length > 0) {\n          // Group by status\n          const statusGroups = workItems.reduce((acc, item) => {\n            const status = item.status || 'Unknown';\n            if (!acc[status]) {\n              acc[status] = [];\n            }\n            acc[status].push(item);\n            return acc;\n          }, {});\n          // Group by type\n          const typeGroups = workItems.reduce((acc, item) => {\n            const type = item.type || 'Unknown';\n            if (!acc[type]) {\n              acc[type] = [];\n            }\n            acc[type].push(item);\n            return acc;\n          }, {});\n          // Create status items\n          let statusItems = Object.keys(statusGroups).map(status => ({\n            status: status,\n            count: statusGroups[status].length,\n            color: this.statusColors[status] || this.getStateColor(status)\n          }));\n          // Create type items\n          this.tasksByType = Object.keys(typeGroups).map(type => ({\n            type: type,\n            count: typeGroups[type].length,\n            color: typeColors[type] || this.getRandomColor()\n          })).sort((a, b) => b.count - a.count);\n          // Sort statuses based on expected status order\n          statusItems = statusItems.sort((a, b) => {\n            const indexA = expectedStatuses.indexOf(a.status);\n            const indexB = expectedStatuses.indexOf(b.status);\n            // If both are in expectedStatuses, sort by that order\n            if (indexA !== -1 && indexB !== -1) {\n              return indexA - indexB;\n            }\n            // If only one is in expectedStatuses, prioritize it\n            if (indexA !== -1) return -1;\n            if (indexB !== -1) return 1;\n            // For any other statuses, sort alphabetically\n            return a.status.localeCompare(b.status);\n          });\n          // Update the task status board\n          this.taskStatusBoard = statusItems;\n          // Also update tasksByStatus for compatibility with older code\n          this.tasksByStatus = [...this.taskStatusBoard];\n          console.log('Task counts by type:', this.tasksByType);\n          console.log('Task counts by status:', this.taskStatusBoard);\n        } else {\n          this.error.taskStatusBoard = 'No tasks found for this iteration';\n          this.taskDetailsError = 'No tasks found for this iteration';\n          // Create dummy data as a last resort\n          this.createDummyTaskBoard();\n        }\n      },\n      error: err => {\n        console.error('Error loading task board data:', err);\n        this.error.taskStatusBoard = 'Failed to load task board data';\n        this.taskDetailsError = 'Failed to load task data';\n        // Fallback to dummy data\n        this.createDummyTaskBoard();\n      }\n    });\n  }\n  createDummyTaskBoard() {\n    // Create dummy data to match the image\n    this.taskStatusBoard = [{\n      status: 'PMG - Proposed',\n      count: 0,\n      color: '#e0e0e0'\n    }, {\n      status: 'DEV - Yet to Start',\n      count: 2,\n      color: '#9a9a9a'\n    }, {\n      status: 'DEV - WIP',\n      count: 4,\n      color: '#0078d4'\n    }, {\n      status: 'DEV - Code Review',\n      count: 2,\n      color: '#324e93'\n    }, {\n      status: 'DEV - Done',\n      count: 5,\n      color: '#00b7c3'\n    }, {\n      status: 'DEV/QC - Reopened',\n      count: 1,\n      color: '#e81123'\n    }];\n    // Create dummy data for types\n    this.tasksByType = [{\n      type: 'Bug',\n      count: 8,\n      color: '#e74c3c'\n    }, {\n      type: 'Requirement',\n      count: 6,\n      color: '#3498db'\n    }, {\n      type: 'Change Request',\n      count: 3,\n      color: '#2ecc71'\n    }, {\n      type: 'Task',\n      count: 5,\n      color: '#f39c12'\n    }];\n    // Also update tasksByStatus for compatibility\n    this.tasksByStatus = [...this.taskStatusBoard];\n    // Clear any loading and error states\n    this.loadingTaskDetails = false;\n    this.taskDetailsError = '';\n  }\n  initializeStatusPieChart() {\n    if (!this.statusPieChartRef?.nativeElement) {\n      return;\n    }\n    // Get canvas element\n    const ctx = this.statusPieChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    // Setup data for pie chart from work item counts\n    const statusData = [{\n      status: 'Dev-New',\n      count: this.workItemCounts.devNew,\n      color: '#00a8e8'\n    }, {\n      status: 'In Progress',\n      count: this.workItemCounts.inProgress,\n      color: '#0078d4'\n    }, {\n      status: 'Code Review',\n      count: this.workItemCounts.codeReview,\n      color: '#8764b8'\n    }, {\n      status: 'Dev Complete',\n      count: this.workItemCounts.devComplete,\n      color: '#107c10'\n    }, {\n      status: 'Completed',\n      count: this.workItemCounts.completed,\n      color: '#00b7c3'\n    }, {\n      status: 'Blocked',\n      count: this.workItemCounts.blocked,\n      color: '#e81123'\n    }];\n    // Filter out states with 0 count for better visualization\n    const filteredStatuses = statusData.filter(item => item.count > 0);\n    const labels = filteredStatuses.map(s => s.status);\n    const data = filteredStatuses.map(s => s.count);\n    const colors = filteredStatuses.map(s => s.color);\n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            data: data,\n            backgroundColor: colors,\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right',\n              display: true\n            },\n            title: {\n              display: true,\n              text: 'Work Item States Distribution'\n            },\n            tooltip: {\n              callbacks: {\n                label: function (context) {\n                  const label = context.label || '';\n                  const value = context.raw || 0;\n                  const total = context.dataset.data.reduce((a, b) => Number(a) + Number(b), 0);\n                  const percentage = Math.round(value / total * 100);\n                  return `${label}: ${value} (${percentage}%)`;\n                }\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n  getStatusColor(status) {\n    return this.statusColors[status] || '#9a9a9a'; // Default gray color\n  }\n  // Chat methods\n  sendChatMessage() {\n    if (!this.currentMessage.trim()) return;\n    // Add user message\n    const userMessage = {\n      role: 'user',\n      content: this.currentMessage.trim(),\n      timestamp: new Date()\n    };\n    this.chatMessages.push(userMessage);\n    // Store message and clear input\n    const message = this.currentMessage;\n    this.currentMessage = '';\n    // Call API to get response\n    this.dashboardService.sendChatMessage(message).subscribe({\n      next: response => {\n        const assistantMessage = {\n          role: 'assistant',\n          content: response,\n          timestamp: new Date()\n        };\n        this.chatMessages.push(assistantMessage);\n      },\n      error: err => {\n        console.error('Error getting chat response:', err);\n        // Add fallback response\n        const fallbackMessage = {\n          role: 'assistant',\n          content: 'Sorry, I encountered an error processing your request. Please try again later.',\n          timestamp: new Date()\n        };\n        this.chatMessages.push(fallbackMessage);\n      }\n    });\n  }\n  /**\r\n   * Load work items from Azure DevOps for the selected iteration using WIQL API\r\n   */\n  loadAzureDevOpsWorkItemsWithWiql() {\n    this.loadingAzureDevOps = true;\n    this.azureDevOpsError = '';\n    this.azureDevOpsService.getWorkItemsByWiql(this.selectedIterationPath).pipe(finalize(() => {\n      this.loadingAzureDevOps = false;\n    })).subscribe({\n      next: dashboardStats => {\n        // Store the work item counts\n        this.workItemCounts = {\n          totalTasks: dashboardStats.totalTasks,\n          devNew: dashboardStats.devNew,\n          inProgress: dashboardStats.inProgress,\n          codeReview: dashboardStats.codeReview,\n          devComplete: dashboardStats.devComplete,\n          completed: dashboardStats.completed,\n          blocked: dashboardStats.blocked\n        };\n        // Store the work items if available\n        if (dashboardStats.workItems) {\n          this.azureDevOpsWorkItems = dashboardStats.workItems;\n        }\n        // Store assignee distribution data\n        if (dashboardStats.statsByAssignee) {\n          this.assigneeDistribution = dashboardStats.statsByAssignee;\n        }\n        // Update the summary data with the Azure DevOps counts\n        this.updateSummaryWithAzureDevOpsCounts();\n        // Update pie chart\n        setTimeout(() => {\n          this.initializeStatusPieChart();\n        }, 100);\n      },\n      error: error => {\n        console.error('Error loading Azure DevOps work items with WIQL:', error);\n        this.azureDevOpsError = 'Failed to load Azure DevOps work items. Please try again.';\n        // Fall back to the legacy method if WIQL fails\n        this.loadAzureDevOpsWorkItems();\n      }\n    });\n  }\n  /**\r\n   * Load work items from Azure DevOps for the selected iteration\r\n   */\n  loadAzureDevOpsWorkItems() {\n    this.loadingAzureDevOps = true;\n    this.azureDevOpsError = '';\n    // First try to get the status counts directly from the backend proxy\n    this.azureDevOpsService.getWorkItemStatusCounts(this.selectedIterationPath).pipe(catchError(error => {\n      console.error('Error loading status counts, falling back to work items:', error);\n      // Fall back to getting work items and counting them\n      return this.azureDevOpsService.getWorkItemsByIteration(this.selectedIterationPath).pipe(map(workItems => {\n        // Process the work items to get counts\n        return this.azureDevOpsService.getWorkItemCounts(workItems);\n      }), catchError(err => {\n        this.azureDevOpsError = 'Failed to load Azure DevOps work items. Please try again.';\n        console.error('Error loading Azure DevOps work items:', err);\n        return of({\n          totalTasks: 0,\n          devNew: 0,\n          inProgress: 0,\n          codeReview: 0,\n          devComplete: 0,\n          completed: 0,\n          blocked: 0\n        });\n      }));\n    }), finalize(() => {\n      this.loadingAzureDevOps = false;\n    })).subscribe(counts => {\n      // Store the counts\n      this.workItemCounts = counts;\n      // Also store the work items if available\n      if (Array.isArray(counts.workItems)) {\n        this.azureDevOpsWorkItems = counts.workItems;\n      }\n      // Update the summary data with the Azure DevOps counts\n      this.updateSummaryWithAzureDevOpsCounts();\n    });\n  }\n  /**\r\n   * Update summary data with the counts from Azure DevOps\r\n   */\n  updateSummaryWithAzureDevOpsCounts() {\n    console.log('Updating summary with Azure DevOps counts:', this.workItemCounts);\n    // Always create a new summary object with the latest counts to ensure reactivity\n    this.sprintSummary = {\n      totalTasks: this.workItemCounts.totalTasks || 0,\n      inProgress: this.workItemCounts.inProgress || 0,\n      completed: this.workItemCounts.completed || 0,\n      blocked: this.workItemCounts.blocked || 0,\n      completionPercentage: this.calculateCompletionPercentage()\n    };\n    // Also update task status board with Azure DevOps data\n    this.updateTaskStatusBoardWithAzureDevOpsCounts();\n    // Create tasksByStatus data for the pie chart\n    if (this.azureDevOpsWorkItems && this.azureDevOpsWorkItems.length > 0) {\n      // Group work items by state\n      const stateGroups = this.azureDevOpsWorkItems.reduce((acc, item) => {\n        const state = item.state || 'Unknown';\n        if (!acc[state]) {\n          acc[state] = [];\n        }\n        acc[state].push(item);\n        return acc;\n      }, {});\n      // Convert to tasksByStatus format\n      this.tasksByStatus = Object.keys(stateGroups).map(state => ({\n        status: state,\n        count: stateGroups[state].length,\n        color: this.getStatusColor(state)\n      })).sort((a, b) => b.count - a.count);\n      // Also update taskStatusBoard for compatibility\n      this.taskStatusBoard = [...this.tasksByStatus];\n    }\n  }\n  /**\r\n   * Calculate completion percentage based on work item counts\r\n   */\n  calculateCompletionPercentage() {\n    const total = this.workItemCounts.totalTasks;\n    if (total === 0) return 0;\n    const completed = this.workItemCounts.completed;\n    return Math.round(completed / total * 100);\n  }\n  /**\r\n   * Update task status board with counts from Azure DevOps\r\n   * This method is now only used for compatibility with other parts of the code\r\n   */\n  updateTaskStatusBoardWithAzureDevOpsCounts() {\n    // Update task status board with the latest data\n    this.loadTaskStatusBoard();\n  }\n  /**\r\n   * Get assignee data as an array for display in the UI\r\n   * @returns Array of assignee data with counts\r\n   */\n  getAssigneeDistribution() {\n    if (!this.assigneeDistribution) {\n      return [];\n    }\n    return Object.keys(this.assigneeDistribution).map(assignee => {\n      return {\n        name: assignee,\n        ...this.assigneeDistribution[assignee]\n      };\n    });\n  }\n  // Get total work items for percentage calculation\n  getTotalWorkItems() {\n    return this.tasksByType.reduce((total, item) => total + item.count, 0);\n  }\n  // Filter iterations based on user input\n  filterIterations() {\n    if (!this.iterationFilter || this.iterationFilter.trim() === '') {\n      this.filteredIterationPaths = [...this.availableIterationPaths];\n    } else {\n      const filterValue = this.iterationFilter.toLowerCase();\n      this.filteredIterationPaths = this.availableIterationPaths.filter(path => path.toLowerCase().includes(filterValue));\n    }\n  }\n  // Select an iteration path from the dropdown\n  selectIterationPath(path) {\n    this.selectedIterationPath = path;\n  }\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.DashboardService), i0.ɵɵdirectiveInject(i2.AzureDevOpsService), i0.ɵɵdirectiveInject(i3.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      viewQuery: function DashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(_c2, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stateDistributionChartRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.iterationDistributionChartRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.statusPieChartRef = _t.first);\n        }\n      },\n      decls: 59,\n      vars: 15,\n      consts: [[1, \"dashboard-container\", \"p-4\"], [1, \"row\", \"mb-4\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-0\"], [1, \"d-flex\", \"align-items-center\"], [1, \"dropdown\", \"me-2\", 2, \"max-width\", \"250px\"], [\"type\", \"button\", \"id\", \"iterationDropdown\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"btn\", \"btn-outline-secondary\", \"dropdown-toggle\"], [\"aria-labelledby\", \"iterationDropdown\", 1, \"dropdown-menu\", \"iteration-dropdown\", 2, \"max-height\", \"300px\", \"overflow-y\", \"auto\"], [1, \"px-3\", \"py-2\"], [\"type\", \"text\", \"placeholder\", \"Filter iterations...\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"dropdown-divider\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", \"me-2\", 3, \"click\"], [1, \"bi\", \"bi-search\"], [1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-arrow-clockwise\"], [1, \"card-body\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card-header\"], [1, \"card-body\", \"d-flex\", \"flex-column\", 2, \"height\", \"350px\"], [1, \"chat-messages\", \"flex-grow-1\", \"overflow-auto\", \"mb-3\"], [\"class\", \"message mb-2\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-input\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Type your message...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-send\"], [1, \"card\", \"mb-4\"], [\"class\", \"row\", 4, \"ngIf\"], [\"href\", \"javascript:void(0)\", 1, \"dropdown-item\", 3, \"click\"], [1, \"text-center\", \"py-4\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"alert\", \"alert-danger\"], [1, \"sprint-title\"], [1, \"d-flex\", \"justify-content-between\", \"mt-3\"], [1, \"text-muted\", \"mb-1\"], [1, \"fw-bold\"], [1, \"fw-bold\", \"days-remaining\"], [1, \"text-muted\"], [1, \"text-muted\", \"small\"], [1, \"text-muted\", \"small\", \"text-start\"], [1, \"message\", \"mb-2\", 3, \"ngClass\"], [1, \"message-content\"], [1, \"message-text\"], [1, \"message-time\", \"small\", \"text-muted\"], [1, \"mt-2\"], [1, \"row\"], [\"class\", \"col-md-2 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-2\", \"mb-3\"], [1, \"card\", \"task-state-card\", \"h-100\"], [1, \"card-body\", \"text-center\", \"text-white\", \"p-3\"], [1, \"mb-0\", \"display-4\", \"fw-bold\"], [1, \"mb-0\", \"small\", \"status-label\"], [\"class\", \"col-md-3 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-3\", \"mb-3\"], [1, \"card\", \"task-type-card\", \"h-100\"], [1, \"card-body\", \"p-3\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"mb-0\", \"card-title\"], [1, \"badge\", \"rounded-pill\"], [1, \"progress\"], [1, \"progress-bar\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h4\", 5);\n          i0.ɵɵtext(6, \"Sprint Overview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\")(8, \"div\", 6)(9, \"div\", 7)(10, \"button\", 8);\n          i0.ɵɵtext(11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"ul\", 9)(13, \"li\")(14, \"div\", 10)(15, \"input\", 11);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_15_listener($event) {\n            return ctx.iterationFilter = $event;\n          })(\"input\", function DashboardComponent_Template_input_input_15_listener() {\n            return ctx.filterIterations();\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(16, \"li\");\n          i0.ɵɵelement(17, \"hr\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(18, DashboardComponent_li_18_Template, 3, 1, \"li\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(19, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_19_listener() {\n            return ctx.loadIterationData();\n          });\n          i0.ɵɵelement(20, \"i\", 15);\n          i0.ɵɵtext(21, \" Search \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_22_listener() {\n            return ctx.reload();\n          });\n          i0.ɵɵelement(23, \"i\", 17);\n          i0.ɵɵtext(24, \" Refresh \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(25, \"div\", 18);\n          i0.ɵɵtemplate(26, DashboardComponent_div_26_Template, 4, 0, \"div\", 19);\n          i0.ɵɵtemplate(27, DashboardComponent_div_27_Template, 2, 1, \"div\", 20);\n          i0.ɵɵtemplate(28, DashboardComponent_div_28_Template, 21, 10, \"div\", 21);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(29, \"div\", 22)(30, \"div\", 3)(31, \"div\", 23)(32, \"h4\", 5);\n          i0.ɵɵtext(33, \"AI Assistant\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 24)(35, \"div\", 25);\n          i0.ɵɵtemplate(36, DashboardComponent_div_36_Template, 12, 0, \"div\", 19);\n          i0.ɵɵtemplate(37, DashboardComponent_div_37_Template, 7, 9, \"div\", 26);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\", 27)(39, \"div\", 28)(40, \"input\", 29);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_40_listener($event) {\n            return ctx.currentMessage = $event;\n          })(\"keyup.enter\", function DashboardComponent_Template_input_keyup_enter_40_listener() {\n            return ctx.sendChatMessage();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"button\", 30);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_41_listener() {\n            return ctx.sendChatMessage();\n          });\n          i0.ɵɵelement(42, \"i\", 31);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(43, \"div\", 32)(44, \"div\", 23)(45, \"h4\", 5);\n          i0.ɵɵtext(46, \"Task Distribution by Status\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(47, \"div\", 18);\n          i0.ɵɵtemplate(48, DashboardComponent_div_48_Template, 6, 0, \"div\", 19);\n          i0.ɵɵtemplate(49, DashboardComponent_div_49_Template, 2, 1, \"div\", 20);\n          i0.ɵɵtemplate(50, DashboardComponent_div_50_Template, 3, 0, \"div\", 19);\n          i0.ɵɵtemplate(51, DashboardComponent_div_51_Template, 2, 1, \"div\", 33);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(52, \"div\", 32)(53, \"div\", 23)(54, \"h4\", 5);\n          i0.ɵɵtext(55, \"Work Items by Type\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(56, \"div\", 18);\n          i0.ɵɵtemplate(57, DashboardComponent_div_57_Template, 2, 1, \"div\", 33);\n          i0.ɵɵtemplate(58, DashboardComponent_div_58_Template, 3, 0, \"div\", 19);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate1(\" \", ctx.selectedIterationPath || \"Select Iteration Path\", \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.iterationFilter);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredIterationPaths);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading.sprint);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error.sprint);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading.sprint && !ctx.error.sprint && ctx.sprintOverview);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.chatMessages.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.chatMessages);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngModel\", ctx.currentMessage);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.loadingTaskDetails);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.taskDetailsError);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loadingTaskDetails && (!ctx.taskStatusBoard || ctx.taskStatusBoard.length === 0) && !ctx.taskDetailsError);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loadingTaskDetails && ctx.taskStatusBoard && ctx.taskStatusBoard.length > 0);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loadingTaskDetails && ctx.tasksByType && ctx.tasksByType.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loadingTaskDetails && (!ctx.tasksByType || ctx.tasksByType.length === 0) && !ctx.taskDetailsError);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i4.DatePipe],\n      styles: [\".dashboard-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  border-radius: 8px;\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n  border: none;\\n  margin-bottom: 20px;\\n}\\n.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\\n  background-color: #fff;\\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\\n  font-weight: 600;\\n  padding: 12px 16px;\\n}\\n\\n.days-remaining[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  color: #3050e6;\\n}\\n\\n.sprint-title[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  font-weight: 600;\\n  color: #333;\\n  margin-bottom: 1rem;\\n}\\n\\n\\n.summary-card[_ngcontent-%COMP%] {\\n  text-align: center;\\n  border-radius: 8px;\\n  transition: transform 0.2s;\\n  height: 100%;\\n}\\n.summary-card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-5px);\\n}\\n.summary-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%] {\\n  font-size: 2.5rem;\\n  font-weight: 700;\\n}\\n\\n.total-card[_ngcontent-%COMP%] {\\n  border-top: 4px solid #6c757d;\\n}\\n\\n.in-progress-card[_ngcontent-%COMP%] {\\n  border-top: 4px solid #0078d4;\\n}\\n\\n.completed-card[_ngcontent-%COMP%] {\\n  border-top: 4px solid #107c10;\\n}\\n\\n.blocked-card[_ngcontent-%COMP%] {\\n  border-top: 4px solid #e81123;\\n}\\n\\n\\n.status-card[_ngcontent-%COMP%] {\\n  transition: transform 0.2s;\\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\\n}\\n.status-card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-5px);\\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\\n}\\n.status-card[_ngcontent-%COMP%]   .status-count[_ngcontent-%COMP%] {\\n  font-size: 2.5rem;\\n  font-weight: bold;\\n}\\n.status-card[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%] {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n\\n.chat-messages[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  max-height: 250px;\\n  overflow-y: auto;\\n}\\n\\n.message[_ngcontent-%COMP%] {\\n  margin-bottom: 10px;\\n  max-width: 85%;\\n  padding: 8px 12px;\\n  border-radius: 12px;\\n  position: relative;\\n}\\n\\n.user-message[_ngcontent-%COMP%] {\\n  align-self: flex-end;\\n  background-color: #007bff;\\n  color: white;\\n  margin-left: auto;\\n  border-bottom-right-radius: 2px;\\n}\\n.user-message[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%] {\\n  text-align: right;\\n  color: rgba(255, 255, 255, 0.7) !important;\\n}\\n\\n.assistant-message[_ngcontent-%COMP%] {\\n  align-self: flex-start;\\n  background-color: #f1f1f1;\\n  color: #333;\\n  margin-right: auto;\\n  border-bottom-left-radius: 2px;\\n}\\n\\n.message-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.message-text[_ngcontent-%COMP%] {\\n  margin-bottom: 4px;\\n}\\n\\n\\n.activity-list[_ngcontent-%COMP%] {\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n\\n.activity-title[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n\\n.activity-details[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  color: #666;\\n}\\n\\n.activity-meta[_ngcontent-%COMP%] {\\n  white-space: nowrap;\\n  margin-left: 15px;\\n}\\n\\n\\n.color-box[_ngcontent-%COMP%] {\\n  width: 16px;\\n  height: 16px;\\n  display: inline-block;\\n  border-radius: 3px;\\n}\\n\\n\\n.assignee-row[_ngcontent-%COMP%] {\\n  padding: 12px;\\n  border-radius: 6px;\\n  background-color: #f8f9fa;\\n  transition: all 0.2s ease;\\n}\\n.assignee-row[_ngcontent-%COMP%]:hover {\\n  background-color: #f1f3f5;\\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\\n}\\n\\n.status-badge[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  font-size: 0.8rem;\\n  font-weight: 500;\\n}\\n\\n.status-legend-item[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  background-color: #f8f9fa;\\n}\\n\\n\\n.task-state-card[_ngcontent-%COMP%] {\\n  border: none;\\n  border-radius: 6px;\\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\\n  overflow: hidden;\\n}\\n.task-state-card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-4px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\\n}\\n.task-state-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%] {\\n  padding: 1.5rem 1rem;\\n}\\n.task-state-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 3rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  margin-bottom: 0.5rem;\\n}\\n.task-state-card[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%] {\\n  font-size: 0.8rem;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-width: 100%;\\n}\\n\\n\\n.task-type-card[_ngcontent-%COMP%] {\\n  border: 1px solid #e6e6e6;\\n  border-left-width: 5px;\\n  border-radius: 6px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\\n  overflow: hidden;\\n}\\n.task-type-card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-3px);\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n}\\n.task-type-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%] {\\n  font-size: 1rem;\\n  font-weight: 600;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n.task-type-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  font-weight: 500;\\n  padding: 0.35rem 0.7rem;\\n}\\n.task-type-card[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%] {\\n  height: 6px;\\n  background-color: #f5f5f5;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kYXNoYm9hcmQvZGFzaGJvYXJkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7RUFDQSx3Q0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQUNGO0FBQ0U7RUFDRSxzQkFBQTtFQUNBLDRDQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtBQUNKOztBQUdBO0VBQ0UsZUFBQTtFQUNBLGNBQUE7QUFBRjs7QUFHQTtFQUNFLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7QUFBRjs7QUFHQSxrQkFBQTtBQUNBO0VBQ0Usa0JBQUE7RUFDQSxrQkFBQTtFQUNBLDBCQUFBO0VBQ0EsWUFBQTtBQUFGO0FBRUU7RUFDRSwyQkFBQTtBQUFKO0FBR0U7RUFDRSxpQkFBQTtFQUNBLGdCQUFBO0FBREo7O0FBS0E7RUFDRSw2QkFBQTtBQUZGOztBQUtBO0VBQ0UsNkJBQUE7QUFGRjs7QUFLQTtFQUNFLDZCQUFBO0FBRkY7O0FBS0E7RUFDRSw2QkFBQTtBQUZGOztBQUtBLHdCQUFBO0FBQ0E7RUFDRSwwQkFBQTtFQUNBLHdDQUFBO0FBRkY7QUFJRTtFQUNFLDJCQUFBO0VBQ0EseUNBQUE7QUFGSjtBQUtFO0VBQ0UsaUJBQUE7RUFDQSxpQkFBQTtBQUhKO0FBTUU7RUFDRSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsdUJBQUE7QUFKSjs7QUFRQSxvQkFBQTtBQUNBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQUxGOztBQVFBO0VBQ0UsbUJBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0FBTEY7O0FBUUE7RUFDRSxvQkFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsK0JBQUE7QUFMRjtBQU9FO0VBQ0UsaUJBQUE7RUFDQSwwQ0FBQTtBQUxKOztBQVNBO0VBQ0Usc0JBQUE7RUFDQSx5QkFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLDhCQUFBO0FBTkY7O0FBU0E7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7QUFORjs7QUFTQTtFQUNFLGtCQUFBO0FBTkY7O0FBU0EsMEJBQUE7QUFDQTtFQUNFLGlCQUFBO0VBQ0EsZ0JBQUE7QUFORjs7QUFTQTtFQUNFLGdCQUFBO0FBTkY7O0FBU0E7RUFDRSxpQkFBQTtFQUNBLFdBQUE7QUFORjs7QUFTQTtFQUNFLG1CQUFBO0VBQ0EsaUJBQUE7QUFORjs7QUFTQSwwQkFBQTtBQUNBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxxQkFBQTtFQUNBLGtCQUFBO0FBTkY7O0FBU0Esa0NBQUE7QUFDQTtFQUNFLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EseUJBQUE7QUFORjtBQVFFO0VBQ0UseUJBQUE7RUFDQSx5Q0FBQTtBQU5KOztBQVVBO0VBQ0UscUJBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQVBGOztBQVVBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtBQVBGOztBQVVBLDZCQUFBO0FBQ0E7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSx5Q0FBQTtFQUNBLHFEQUFBO0VBQ0EsZ0JBQUE7QUFQRjtBQVNFO0VBQ0UsMkJBQUE7RUFDQSx5Q0FBQTtBQVBKO0FBVUU7RUFDRSxvQkFBQTtBQVJKO0FBV0U7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxjQUFBO0VBQ0EscUJBQUE7QUFUSjtBQVlFO0VBQ0UsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsdUJBQUE7RUFDQSxlQUFBO0FBVko7O0FBY0EsNEJBQUE7QUFDQTtFQUNFLHlCQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLHlDQUFBO0VBQ0EscURBQUE7RUFDQSxnQkFBQTtBQVhGO0FBYUU7RUFDRSwyQkFBQTtFQUNBLHdDQUFBO0FBWEo7QUFjRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSx1QkFBQTtBQVpKO0FBZUU7RUFDRSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsdUJBQUE7QUFiSjtBQWdCRTtFQUNFLFdBQUE7RUFDQSx5QkFBQTtBQWRKIiwic291cmNlc0NvbnRlbnQiOlsiLmRhc2hib2FyZC1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uY2FyZCB7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgYm9yZGVyOiBub25lO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBcbiAgLmNhcmQtaGVhZGVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgcGFkZGluZzogMTJweCAxNnB4O1xuICB9XG59XG5cbi5kYXlzLXJlbWFpbmluZyB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgY29sb3I6ICMzMDUwZTY7XG59XG5cbi5zcHJpbnQtdGl0bGUge1xuICBmb250LXNpemU6IDEuNXJlbTtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICMzMzM7XG4gIG1hcmdpbi1ib3R0b206IDFyZW07XG59XG5cbi8qIFN1bW1hcnkgQ2FyZHMgKi9cbi5zdW1tYXJ5LWNhcmQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7XG4gIGhlaWdodDogMTAwJTtcbiAgXG4gICY6aG92ZXIge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTtcbiAgfVxuICBcbiAgLmNhcmQtdmFsdWUge1xuICAgIGZvbnQtc2l6ZTogMi41cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIH1cbn1cblxuLnRvdGFsLWNhcmQge1xuICBib3JkZXItdG9wOiA0cHggc29saWQgIzZjNzU3ZDtcbn1cblxuLmluLXByb2dyZXNzLWNhcmQge1xuICBib3JkZXItdG9wOiA0cHggc29saWQgIzAwNzhkNDtcbn1cblxuLmNvbXBsZXRlZC1jYXJkIHtcbiAgYm9yZGVyLXRvcDogNHB4IHNvbGlkICMxMDdjMTA7XG59XG5cbi5ibG9ja2VkLWNhcmQge1xuICBib3JkZXItdG9wOiA0cHggc29saWQgI2U4MTEyMztcbn1cblxuLyogU3RhdHVzIGNhcmQgc3R5bGluZyAqL1xuLnN0YXR1cy1jYXJkIHtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG5cbiAgJjpob3ZlciB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xuICAgIGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICB9XG5cbiAgLnN0YXR1cy1jb3VudCB7XG4gICAgZm9udC1zaXplOiAyLjVyZW07XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICAuc3RhdHVzLXRpdGxlIHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIH1cbn1cblxuLyogQUkgQ2hhdCBzdHlsaW5nICovXG4uY2hhdC1tZXNzYWdlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1heC1oZWlnaHQ6IDI1MHB4O1xuICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4ubWVzc2FnZSB7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIG1heC13aWR0aDogODUlO1xuICBwYWRkaW5nOiA4cHggMTJweDtcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4udXNlci1tZXNzYWdlIHtcbiAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAycHg7XG4gIFxuICAubWVzc2FnZS10aW1lIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLmFzc2lzdGFudC1tZXNzYWdlIHtcbiAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTtcbiAgY29sb3I6ICMzMzM7XG4gIG1hcmdpbi1yaWdodDogYXV0bztcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMnB4O1xufVxuXG4ubWVzc2FnZS1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLm1lc3NhZ2UtdGV4dCB7XG4gIG1hcmdpbi1ib3R0b206IDRweDtcbn1cblxuLyogQWN0aXZpdHkgZmVlZCBzdHlsaW5nICovXG4uYWN0aXZpdHktbGlzdCB7XG4gIG1heC1oZWlnaHQ6IDQwMHB4O1xuICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4uYWN0aXZpdHktdGl0bGUge1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uYWN0aXZpdHktZGV0YWlscyB7XG4gIGZvbnQtc2l6ZTogMC45cmVtO1xuICBjb2xvcjogIzY2Njtcbn1cblxuLmFjdGl2aXR5LW1ldGEge1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBtYXJnaW4tbGVmdDogMTVweDtcbn1cblxuLyogQ29sb3IgYm94IGZvciBsZWdlbmRzICovXG4uY29sb3ItYm94IHtcbiAgd2lkdGg6IDE2cHg7XG4gIGhlaWdodDogMTZweDtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG5cbi8qIEFzc2lnbmVlIGRpc3RyaWJ1dGlvbiBzdHlsaW5nICovXG4uYXNzaWduZWUtcm93IHtcbiAgcGFkZGluZzogMTJweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICBcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjNmNTtcbiAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTtcbiAgfVxufVxuXG4uc3RhdHVzLWJhZGdlIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwYWRkaW5nOiA0cHggOHB4O1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGZvbnQtc2l6ZTogMC44cmVtO1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uc3RhdHVzLWxlZ2VuZC1pdGVtIHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xufVxuXG4vKiBUYXNrIHN0YXRlIGNhcmRzIHN0eWxpbmcgKi9cbi50YXNrLXN0YXRlLWNhcmQge1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2UsIGJveC1zaGFkb3cgMC4ycyBlYXNlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBcbiAgJjpob3ZlciB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC00cHgpO1xuICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICB9XG4gIFxuICAuY2FyZC1ib2R5IHtcbiAgICBwYWRkaW5nOiAxLjVyZW0gMXJlbTtcbiAgfVxuICBcbiAgaDEge1xuICAgIGZvbnQtc2l6ZTogM3JlbTtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgfVxuICBcbiAgLnN0YXR1cy1sYWJlbCB7XG4gICAgZm9udC1zaXplOiAwLjhyZW07XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgfVxufVxuXG4vKiBUYXNrIHR5cGUgY2FyZHMgc3R5bGluZyAqL1xuLnRhc2stdHlwZS1jYXJkIHtcbiAgYm9yZGVyOiAxcHggc29saWQgI2U2ZTZlNjtcbiAgYm9yZGVyLWxlZnQtd2lkdGg6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZSwgYm94LXNoYWRvdyAwLjJzIGVhc2U7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIFxuICAmOmhvdmVyIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTNweCk7XG4gICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgfVxuICBcbiAgLmNhcmQtdGl0bGUge1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgfVxuICBcbiAgLmJhZGdlIHtcbiAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHBhZGRpbmc6IDAuMzVyZW0gMC43cmVtO1xuICB9XG4gIFxuICAucHJvZ3Jlc3Mge1xuICAgIGhlaWdodDogNnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XG4gIH1cbn0gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["of","catchError","finalize","map","i0","DashboardComponent","constructor","dashboardService","azureDevOpsService","http","sprint","summary","activity","tip","distribution","stateDistribution","longTermDevNew","supportItems","aiTips","taskStatusBoard","totalTasks","devNew","inProgress","codeReview","devComplete","completed","blocked","ngOnInit","filteredIterationPaths","availableIterationPaths","loadDashboardData","ngAfterViewInit","loadSprintOverview","loadAiTips","loadingTaskDetails","taskDetailsError","loadTaskStatusBoard","loadIterationData","selectedIterationPath","trim","loadAzureDevOpsWorkItemsWithWiql","loadSprintSummary","includes","push","loading","getCurrentSprint","subscribe","next","data","sprintOverview","loadActivityFeed","loadWorkItemDistribution","loadStateDistributions","error","err","console","iterationPath","getSprintSummary","sprintSummary","getActivityFeed","activityFeed","loadDailyTip","getDailyTip","dailyTip","getWorkItemDistribution","workItemDistribution","setTimeout","initializeWorkItemDistributionChart","getStateDistribution","stateDistributions","initializeStateDistributionsChart","loadLongTermDevNewItems","getLongTermDevNewItems","longTermDevNewItems","loadSupportItems","getSupportItems","getAiTips","stateDistributionChartRef","nativeElement","ctx","getContext","labels","states","s","state","count","colors","stateColors","getRandomColor","window","Chart","chart","destroy","type","datasets","backgroundColor","borderWidth","options","responsive","plugins","legend","position","title","display","text","length","iterationDistributionChartRef","iterationLabels","d","allStates","Set","forEach","dist","add","Array","from","stateName","stateColor","label","stateData","find","scales","x","stacked","y","beginAtZero","changeIterationPath","getStateColor","randomIndex","Math","floor","random","defaultChartColors","reload","expectedStatuses","typeColors","encodedPath","encodeURIComponent","replace","url","get","pipe","workItems","statusGroups","reduce","acc","item","status","typeGroups","statusItems","Object","keys","color","statusColors","tasksByType","sort","a","b","indexA","indexOf","indexB","localeCompare","tasksByStatus","log","createDummyTaskBoard","initializeStatusPieChart","statusPieChartRef","statusData","workItemCounts","filteredStatuses","filter","tooltip","callbacks","context","value","raw","total","dataset","Number","percentage","round","getStatusColor","sendChatMessage","currentMessage","userMessage","role","content","timestamp","Date","chatMessages","message","response","assistantMessage","fallbackMessage","loadingAzureDevOps","azureDevOpsError","getWorkItemsByWiql","dashboardStats","azureDevOpsWorkItems","statsByAssignee","assigneeDistribution","updateSummaryWithAzureDevOpsCounts","loadAzureDevOpsWorkItems","getWorkItemStatusCounts","getWorkItemsByIteration","getWorkItemCounts","counts","isArray","completionPercentage","calculateCompletionPercentage","updateTaskStatusBoardWithAzureDevOpsCounts","stateGroups","getAssigneeDistribution","assignee","name","getTotalWorkItems","filterIterations","iterationFilter","filterValue","toLowerCase","path","selectIterationPath","selectors","viewQuery"],"sourceRoot":"","sources":["E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\dashboard\\dashboard.component.ts","E:\\Project-AI\\AI-Scrum\\frontend\\src\\app\\components\\dashboard\\dashboard.component.html"],"sourcesContent":["import { Component, OnInit, AfterViewInit, ElementRef, ViewChild } from '@angular/core';\nimport { DashboardService } from '../../services/dashboard.service';\nimport { AzureDevOpsService } from '../../services/azure-devops.service';\nimport { \n  SprintOverview, \n  SprintSummary, \n  ActivityFeed, \n  WorkItemDistribution, \n  LongTermDevNewItem, \n  SupportItem,\n  AiDashboardTip,\n  StateCount,\n  TaskStatusBoard,\n  TaskStatusItem,\n  ChatMessage\n} from '../../models/sprint.model';\nimport { forkJoin, of } from 'rxjs';\nimport { catchError, finalize, map } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\n\ndeclare global {\n  interface Window {\n    Chart: any;\n  }\n}\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss']\n})\nexport class DashboardComponent implements OnInit, AfterViewInit {\n  @ViewChild('stateDistributionChart') stateDistributionChartRef!: ElementRef;\n  @ViewChild('iterationDistributionChart') iterationDistributionChartRef!: ElementRef;\n  @ViewChild('statusPieChart') statusPieChartRef!: ElementRef;\n  \n  sprintOverview: SprintOverview | null = null;\n  sprintSummary: SprintSummary | null = null;\n  activityFeed: ActivityFeed | null = null;\n  dailyTip: string = '';\n  workItemDistribution: WorkItemDistribution | null = null;\n  stateDistributions: WorkItemDistribution[] = [];\n  longTermDevNewItems: LongTermDevNewItem[] = [];\n  supportItems: SupportItem[] = [];\n  aiTips: AiDashboardTip | null = null;\n  \n  // Define state colors for consistency\n  stateColors: Record<string, string> = {\n    'Proposed': '#e6e6e6',\n    'New': '#b4d7a8',\n    'Dev-New': '#b4d7a8',\n    'Active': '#4a86e8',\n    'Dev-WIP': '#4a86e8',\n    'In Progress': '#4a86e8',\n    'Resolved': '#ffd966',\n    'Code Review': '#9fc5e8',\n    'QA': '#d5a6bd',\n    'Testing': '#d5a6bd',\n    'Done': '#93c47d',\n    'Closed': '#6aa84f',\n    'Completed': '#6aa84f',\n    'Blocked': '#e06666',\n    'Removed': '#999999'\n  };\n  \n  // Default chart colors if state not found in mapping\n  defaultChartColors = [\n    '#4a86e8', '#6aa84f', '#ffd966', '#e06666', '#9fc5e8', \n    '#d5a6bd', '#b4d7a8', '#e6e6e6', '#93c47d', '#6fa8dc'\n  ];\n  \n  // Properties for the new task board\n  taskStatusBoard: TaskStatusItem[] = [];\n  \n  // Properties for task details\n  loadingTaskDetails = false;\n  taskDetailsError = '';\n  tasksByStatus: { status: string; count: number; color: string }[] = [];\n  \n  // Chat properties\n  chatMessages: ChatMessage[] = [];\n  currentMessage: string = '';\n  \n  // Define status colors based on Azure DevOps board from the image\n  statusColors: Record<string, string> = {\n    'PMG - Proposed': '#e0e0e0',\n    'DEV - Yet to Start': '#9a9a9a',\n    'DEV - WIP': '#0078d4',\n    'DEV - Code Review': '#324e93',\n    'DEV - Done': '#00b7c3',\n    'DEV/QC - Reopened': '#e81123',\n    'Clarifications': '#fff100',\n    'On Hold': '#e3008c',\n    'QC - In Test Bed': '#8764b8',\n    'Completed': '#107c10'\n  };\n  \n  // Track loading and error states\n  loading = {\n    sprint: true,\n    summary: true,\n    activity: true,\n    tip: true,\n    distribution: true,\n    stateDistribution: true,\n    longTermDevNew: true,\n    supportItems: true,\n    aiTips: true,\n    taskStatusBoard: true\n  };\n  \n  error = {\n    sprint: '',\n    summary: '',\n    activity: '',\n    tip: '',\n    distribution: '',\n    stateDistribution: '',\n    longTermDevNew: '',\n    supportItems: '',\n    aiTips: '',\n    taskStatusBoard: ''\n  };\n\n  // Starting with a default Iteration Path that can be changed\n  selectedIterationPath: string = 'Techoil\\\\2.3.23';\n  availableIterationPaths: string[] = [\n    'Techoil\\\\2.3.23',\n    'Techoil\\\\2.3.22',\n    'Techoil\\\\2.3.21',\n    'Techoil\\\\2.3.19',\n    'Techoil\\\\2.3.2',\n    '@CurrentIteration',\n    '@CurrentIteration + 1',\n    '@CurrentIteration - 1',\n    'Techoil'\n  ];\n  filteredIterationPaths: string[] = [];\n  iterationFilter: string = '';\n  \n  // Work item status counts from Azure DevOps\n  azureDevOpsWorkItems: any[] = [];\n  workItemCounts = {\n    totalTasks: 0,\n    devNew: 0,\n    inProgress: 0,\n    codeReview: 0,\n    devComplete: 0,\n    completed: 0,\n    blocked: 0\n  };\n  \n  // Assignee distribution data\n  assigneeDistribution: any = {};\n  \n  // Loading and error states\n  loadingAzureDevOps = false;\n  azureDevOpsError = '';\n\n  // Stats grouping for types and statuses\n  tasksByType: { type: string; count: number; color: string }[] = [];\n\n  constructor(\n    private dashboardService: DashboardService,\n    private azureDevOpsService: AzureDevOpsService,\n    private http: HttpClient\n  ) { }\n\n  ngOnInit(): void {\n    this.filteredIterationPaths = [...this.availableIterationPaths];\n    this.loadDashboardData();\n  }\n\n  ngAfterViewInit(): void {\n    // Charts will be initialized after data is loaded\n  }\n\n  loadDashboardData(): void {\n    this.loadSprintOverview();\n    this.loadAiTips();\n    \n    // Load Azure DevOps data for the initial iteration path\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    this.loadTaskStatusBoard();\n  }\n\n  loadIterationData(): void {\n    // Validate iteration path\n    if (!this.selectedIterationPath) {\n      return;\n    }\n    \n    // Trim whitespace and ensure consistent formatting\n    this.selectedIterationPath = this.selectedIterationPath.trim();\n    \n    // Reset loading and error states\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    \n    // Load Azure DevOps work items directly first to get live data\n    this.loadAzureDevOpsWorkItemsWithWiql();\n    \n    // Load other dashboard data\n    this.loadSprintSummary(this.selectedIterationPath);\n    this.loadTaskStatusBoard();\n    \n    // Update available paths if this is a new one\n    if (!this.availableIterationPaths.includes(this.selectedIterationPath)) {\n      this.availableIterationPaths.push(this.selectedIterationPath);\n    }\n  }\n\n  loadSprintOverview(): void {\n    this.loading.sprint = true;\n    this.dashboardService.getCurrentSprint().subscribe({\n      next: (data) => {\n        this.sprintOverview = data;\n        // Use hard-coded iteration path instead of data.iterationPath\n        // this.selectedIterationPath = data.iterationPath;\n        this.loading.sprint = false;\n        this.loadSprintSummary(this.selectedIterationPath);\n        this.loadActivityFeed();\n        this.loadWorkItemDistribution(this.selectedIterationPath);\n        this.loadStateDistributions();\n      },\n      error: (err) => {\n        this.error.sprint = 'Failed to load sprint data';\n        this.loading.sprint = false;\n        console.error('Error loading sprint data:', err);\n      }\n    });\n  }\n\n  loadSprintSummary(iterationPath: string): void {\n    this.loading.summary = true;\n    this.dashboardService.getSprintSummary(iterationPath).subscribe({\n      next: (data) => {\n        this.sprintSummary = data;\n        this.loading.summary = false;\n      },\n      error: (err) => {\n        this.error.summary = 'Failed to load summary data';\n        this.loading.summary = false;\n        console.error('Error loading summary data:', err);\n      }\n    });\n  }\n\n  loadActivityFeed(): void {\n    this.loading.activity = true;\n    this.dashboardService.getActivityFeed().subscribe({\n      next: (data) => {\n        this.activityFeed = data;\n        this.loading.activity = false;\n      },\n      error: (err) => {\n        this.error.activity = 'Failed to load activity feed';\n        this.loading.activity = false;\n        console.error('Error loading activity feed:', err);\n      }\n    });\n  }\n\n  loadDailyTip(): void {\n    this.loading.tip = true;\n    this.dashboardService.getDailyTip().subscribe({\n      next: (data) => {\n        this.dailyTip = data.tip;\n        this.loading.tip = false;\n      },\n      error: (err) => {\n        this.error.tip = 'Failed to load daily tip';\n        this.loading.tip = false;\n        console.error('Error loading daily tip:', err);\n      }\n    });\n  }\n  \n  loadWorkItemDistribution(iterationPath?: string): void {\n    this.loading.distribution = true;\n    this.dashboardService.getWorkItemDistribution(iterationPath).subscribe({\n      next: (data) => {\n        this.workItemDistribution = data;\n        this.loading.distribution = false;\n        \n        // Initialize distribution chart after data is loaded\n        setTimeout(() => {\n          this.initializeWorkItemDistributionChart();\n        }, 100);\n      },\n      error: (err) => {\n        this.error.distribution = 'Failed to load work item distribution';\n        this.loading.distribution = false;\n        console.error('Error loading work item distribution:', err);\n      }\n    });\n  }\n  \n  loadStateDistributions(): void {\n    this.loading.stateDistribution = true;\n    this.dashboardService.getStateDistribution(this.selectedIterationPath).subscribe({\n      next: (data) => {\n        this.stateDistributions = data;\n        // Keep hard-coded iteration paths instead of dynamically loading them\n        // this.availableIterationPaths = data.map(d => d.iterationPath);\n        this.loading.stateDistribution = false;\n        \n        // Initialize state distribution chart after data is loaded\n        setTimeout(() => {\n          this.initializeStateDistributionsChart();\n        }, 100);\n      },\n      error: (err) => {\n        this.error.stateDistribution = 'Failed to load state distributions';\n        this.loading.stateDistribution = false;\n        console.error('Error loading state distributions:', err);\n      }\n    });\n  }\n  \n  loadLongTermDevNewItems(): void {\n    this.loading.longTermDevNew = true;\n    this.dashboardService.getLongTermDevNewItems(5).subscribe({\n      next: (data) => {\n        this.longTermDevNewItems = data;\n        this.loading.longTermDevNew = false;\n      },\n      error: (err) => {\n        this.error.longTermDevNew = 'Failed to load long-term Dev-New items';\n        this.loading.longTermDevNew = false;\n        console.error('Error loading long-term Dev-New items:', err);\n      }\n    });\n  }\n  \n  loadSupportItems(): void {\n    this.loading.supportItems = true;\n    this.dashboardService.getSupportItems(6).subscribe({\n      next: (data) => {\n        this.supportItems = data;\n        this.loading.supportItems = false;\n      },\n      error: (err) => {\n        this.error.supportItems = 'Failed to load support items';\n        this.loading.supportItems = false;\n        console.error('Error loading support items:', err);\n      }\n    });\n  }\n  \n  loadAiTips(): void {\n    this.loading.aiTips = true;\n    this.dashboardService.getAiTips().subscribe({\n      next: (data) => {\n        this.aiTips = data;\n        this.longTermDevNewItems = data.longTermDevNewItems;\n        this.supportItems = data.supportItems;\n        this.dailyTip = data.tip;\n        this.loading.aiTips = false;\n      },\n      error: (err) => {\n        this.error.aiTips = 'Failed to load AI tips';\n        this.loading.aiTips = false;\n        console.error('Error loading AI tips:', err);\n        // Fall back to individual methods\n        this.loadDailyTip();\n        this.loadLongTermDevNewItems();\n        this.loadSupportItems();\n      }\n    });\n  }\n  \n  initializeWorkItemDistributionChart(): void {\n    if (!this.workItemDistribution || !this.stateDistributionChartRef?.nativeElement) {\n      return;\n    }\n    \n    // Get canvas element\n    const ctx = this.stateDistributionChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    \n    const labels = this.workItemDistribution.states.map(s => s.state);\n    const data = this.workItemDistribution.states.map(s => s.count);\n    const colors = this.workItemDistribution.states.map(s => \n      this.stateColors[s.state] || this.getRandomColor()\n    );\n    \n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    \n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            data: data,\n            backgroundColor: colors,\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right',\n            },\n            title: {\n              display: true,\n              text: `Work Item States - ${this.workItemDistribution.iterationPath}`\n            }\n          }\n        }\n      });\n    }\n  }\n  \n  initializeStateDistributionsChart(): void {\n    if (this.stateDistributions.length === 0 || !this.iterationDistributionChartRef?.nativeElement) {\n      return;\n    }\n    \n    // Get canvas element\n    const ctx = this.iterationDistributionChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    \n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    \n    // Prepare data for stacked bar chart\n    const iterationLabels = this.stateDistributions.map(d => d.iterationPath);\n    \n    // Find all unique states across all iterations\n    const allStates = new Set<string>();\n    this.stateDistributions.forEach(dist => {\n      dist.states.forEach(state => {\n        allStates.add(state.state);\n      });\n    });\n    \n    // Create datasets, one for each state\n    const datasets = Array.from(allStates).map(stateName => {\n      // Find color for this state\n      const stateColor = this.stateColors[stateName] || this.getRandomColor();\n      \n      // Create dataset for this state across all iterations\n      return {\n        label: stateName,\n        data: this.stateDistributions.map(dist => {\n          const stateData = dist.states.find(s => s.state === stateName);\n          return stateData ? stateData.count : 0;\n        }),\n        backgroundColor: stateColor\n      };\n    });\n    \n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: iterationLabels,\n          datasets: datasets\n        },\n        options: {\n          responsive: true,\n          scales: {\n            x: {\n              stacked: true,\n            },\n            y: {\n              stacked: true,\n              beginAtZero: true\n            }\n          },\n          plugins: {\n            legend: {\n              position: 'right',\n            },\n            title: {\n              display: true,\n              text: 'Work Item Distribution by Iteration'\n            }\n          }\n        }\n      });\n    }\n  }\n  \n  changeIterationPath(iterationPath: string): void {\n    // Even with hardcoded path, keep the method in case it's called from elsewhere\n    if (iterationPath !== this.selectedIterationPath) {\n      this.selectedIterationPath = iterationPath;\n      this.loadWorkItemDistribution(iterationPath);\n      this.loadSprintSummary(iterationPath);\n    }\n  }\n  \n  getStateColor(state: string): string {\n    return this.stateColors[state] || this.getRandomColor();\n  }\n  \n  getRandomColor(): string {\n    const randomIndex = Math.floor(Math.random() * this.defaultChartColors.length);\n    return this.defaultChartColors[randomIndex];\n  }\n\n  reload(): void {\n    this.loadDashboardData();\n  }\n\n  loadTaskStatusBoard(): void {\n    this.loading.taskStatusBoard = true;\n    this.error.taskStatusBoard = '';\n    this.loadingTaskDetails = true;\n    this.taskDetailsError = '';\n    \n    // Define the expected status order to match the image\n    const expectedStatuses = [\n      'PMG - Proposed',\n      'DEV - Yet to Start', \n      'DEV - WIP', \n      'DEV - Code Review', \n      'DEV - Done',\n      'DEV/QC - Reopened'\n    ];\n    \n    // Type colors for visualization\n    const typeColors: {[key: string]: string} = {\n      'Bug': '#e74c3c',\n      'Requirement': '#3498db',\n      'Change Request': '#2ecc71',\n      'Task': '#f39c12',\n      'Epic': '#9b59b6',\n      'User Story': '#1abc9c'\n    };\n    \n    // Use the direct API endpoint as specified\n    const encodedPath = encodeURIComponent(this.selectedIterationPath).replace(/%5C/g, '%255C');\n    const url = `http://localhost:5000/api/tasks?iterationPath=${encodedPath}`;\n    \n    this.http.get<any[]>(url)\n      .pipe(\n        finalize(() => {\n          this.loading.taskStatusBoard = false;\n          this.loadingTaskDetails = false;\n        })\n      )\n      .subscribe({\n        next: (workItems) => {\n          if (workItems && workItems.length > 0) {\n            // Group by status\n            const statusGroups: {[key: string]: any[]} = workItems.reduce((acc: {[key: string]: any[]}, item) => {\n              const status = item.status || 'Unknown';\n              if (!acc[status]) {\n                acc[status] = [];\n              }\n              acc[status].push(item);\n              return acc;\n            }, {});\n            \n            // Group by type\n            const typeGroups: {[key: string]: any[]} = workItems.reduce((acc: {[key: string]: any[]}, item) => {\n              const type = item.type || 'Unknown';\n              if (!acc[type]) {\n                acc[type] = [];\n              }\n              acc[type].push(item);\n              return acc;\n            }, {});\n            \n            // Create status items\n            let statusItems = Object.keys(statusGroups).map(status => ({\n              status: status,\n              count: statusGroups[status].length,\n              color: this.statusColors[status] || this.getStateColor(status)\n            }));\n            \n            // Create type items\n            this.tasksByType = Object.keys(typeGroups).map(type => ({\n              type: type,\n              count: typeGroups[type].length,\n              color: typeColors[type] || this.getRandomColor()\n            })).sort((a, b) => b.count - a.count);\n            \n            // Sort statuses based on expected status order\n            statusItems = statusItems.sort((a, b) => {\n              const indexA = expectedStatuses.indexOf(a.status);\n              const indexB = expectedStatuses.indexOf(b.status);\n              \n              // If both are in expectedStatuses, sort by that order\n              if (indexA !== -1 && indexB !== -1) {\n                return indexA - indexB;\n              }\n              \n              // If only one is in expectedStatuses, prioritize it\n              if (indexA !== -1) return -1;\n              if (indexB !== -1) return 1;\n              \n              // For any other statuses, sort alphabetically\n              return a.status.localeCompare(b.status);\n            });\n            \n            // Update the task status board\n            this.taskStatusBoard = statusItems;\n            \n            // Also update tasksByStatus for compatibility with older code\n            this.tasksByStatus = [...this.taskStatusBoard];\n            \n            console.log('Task counts by type:', this.tasksByType);\n            console.log('Task counts by status:', this.taskStatusBoard);\n          } else {\n            this.error.taskStatusBoard = 'No tasks found for this iteration';\n            this.taskDetailsError = 'No tasks found for this iteration';\n            \n            // Create dummy data as a last resort\n            this.createDummyTaskBoard();\n          }\n        },\n        error: (err) => {\n          console.error('Error loading task board data:', err);\n          this.error.taskStatusBoard = 'Failed to load task board data';\n          this.taskDetailsError = 'Failed to load task data';\n          \n          // Fallback to dummy data\n          this.createDummyTaskBoard();\n        }\n      });\n  }\n  \n  createDummyTaskBoard(): void {\n    // Create dummy data to match the image\n    this.taskStatusBoard = [\n      { status: 'PMG - Proposed', count: 0, color: '#e0e0e0' },\n      { status: 'DEV - Yet to Start', count: 2, color: '#9a9a9a' },\n      { status: 'DEV - WIP', count: 4, color: '#0078d4' },\n      { status: 'DEV - Code Review', count: 2, color: '#324e93' },\n      { status: 'DEV - Done', count: 5, color: '#00b7c3' },\n      { status: 'DEV/QC - Reopened', count: 1, color: '#e81123' }\n    ];\n    \n    // Create dummy data for types\n    this.tasksByType = [\n      { type: 'Bug', count: 8, color: '#e74c3c' },\n      { type: 'Requirement', count: 6, color: '#3498db' },\n      { type: 'Change Request', count: 3, color: '#2ecc71' },\n      { type: 'Task', count: 5, color: '#f39c12' }\n    ];\n    \n    // Also update tasksByStatus for compatibility\n    this.tasksByStatus = [...this.taskStatusBoard];\n    \n    // Clear any loading and error states\n    this.loadingTaskDetails = false;\n    this.taskDetailsError = '';\n  }\n  \n  initializeStatusPieChart(): void {\n    if (!this.statusPieChartRef?.nativeElement) {\n      return;\n    }\n    \n    // Get canvas element\n    const ctx = this.statusPieChartRef.nativeElement.getContext('2d');\n    if (!ctx) return;\n    \n    // Setup data for pie chart from work item counts\n    const statusData = [\n      { status: 'Dev-New', count: this.workItemCounts.devNew, color: '#00a8e8' },\n      { status: 'In Progress', count: this.workItemCounts.inProgress, color: '#0078d4' },\n      { status: 'Code Review', count: this.workItemCounts.codeReview, color: '#8764b8' },\n      { status: 'Dev Complete', count: this.workItemCounts.devComplete, color: '#107c10' },\n      { status: 'Completed', count: this.workItemCounts.completed, color: '#00b7c3' },\n      { status: 'Blocked', count: this.workItemCounts.blocked, color: '#e81123' }\n    ];\n    \n    // Filter out states with 0 count for better visualization\n    const filteredStatuses = statusData.filter(item => item.count > 0);\n    \n    const labels = filteredStatuses.map(s => s.status);\n    const data = filteredStatuses.map(s => s.count);\n    const colors = filteredStatuses.map(s => s.color);\n    \n    // Clear any existing chart\n    if (window.Chart && ctx.chart) {\n      ctx.chart.destroy();\n    }\n    \n    // Create new chart\n    if (window.Chart) {\n      ctx.chart = new window.Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: labels,\n          datasets: [{\n            data: data,\n            backgroundColor: colors,\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right',\n              display: true\n            },\n            title: {\n              display: true,\n              text: 'Work Item States Distribution'\n            },\n            tooltip: {\n              callbacks: {\n                label: function(context: any) {\n                  const label = context.label || '';\n                  const value = context.raw || 0;\n                  const total = context.dataset.data.reduce((a: number, b: number) => Number(a) + Number(b), 0);\n                  const percentage = Math.round((value / total) * 100);\n                  return `${label}: ${value} (${percentage}%)`;\n                }\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n  \n  getStatusColor(status: string): string {\n    return this.statusColors[status] || '#9a9a9a'; // Default gray color\n  }\n  \n  // Chat methods\n  sendChatMessage(): void {\n    if (!this.currentMessage.trim()) return;\n    \n    // Add user message\n    const userMessage: ChatMessage = {\n      role: 'user',\n      content: this.currentMessage.trim(),\n      timestamp: new Date()\n    };\n    this.chatMessages.push(userMessage);\n    \n    // Store message and clear input\n    const message = this.currentMessage;\n    this.currentMessage = '';\n    \n    // Call API to get response\n    this.dashboardService.sendChatMessage(message).subscribe({\n      next: (response) => {\n        const assistantMessage: ChatMessage = {\n          role: 'assistant',\n          content: response,\n          timestamp: new Date()\n        };\n        this.chatMessages.push(assistantMessage);\n      },\n      error: (err) => {\n        console.error('Error getting chat response:', err);\n        // Add fallback response\n        const fallbackMessage: ChatMessage = {\n          role: 'assistant',\n          content: 'Sorry, I encountered an error processing your request. Please try again later.',\n          timestamp: new Date()\n        };\n        this.chatMessages.push(fallbackMessage);\n      }\n    });\n  }\n\n  /**\n   * Load work items from Azure DevOps for the selected iteration using WIQL API\n   */\n  loadAzureDevOpsWorkItemsWithWiql(): void {\n    this.loadingAzureDevOps = true;\n    this.azureDevOpsError = '';\n    \n    this.azureDevOpsService.getWorkItemsByWiql(this.selectedIterationPath)\n      .pipe(\n        finalize(() => {\n          this.loadingAzureDevOps = false;\n        })\n      )\n      .subscribe({\n        next: (dashboardStats) => {\n          // Store the work item counts\n          this.workItemCounts = {\n            totalTasks: dashboardStats.totalTasks,\n            devNew: dashboardStats.devNew,\n            inProgress: dashboardStats.inProgress,\n            codeReview: dashboardStats.codeReview,\n            devComplete: dashboardStats.devComplete,\n            completed: dashboardStats.completed,\n            blocked: dashboardStats.blocked\n          };\n          \n          // Store the work items if available\n          if (dashboardStats.workItems) {\n            this.azureDevOpsWorkItems = dashboardStats.workItems;\n          }\n          \n          // Store assignee distribution data\n          if (dashboardStats.statsByAssignee) {\n            this.assigneeDistribution = dashboardStats.statsByAssignee;\n          }\n          \n          // Update the summary data with the Azure DevOps counts\n          this.updateSummaryWithAzureDevOpsCounts();\n          \n          // Update pie chart\n          setTimeout(() => {\n            this.initializeStatusPieChart();\n          }, 100);\n        },\n        error: (error) => {\n          console.error('Error loading Azure DevOps work items with WIQL:', error);\n          this.azureDevOpsError = 'Failed to load Azure DevOps work items. Please try again.';\n          \n          // Fall back to the legacy method if WIQL fails\n          this.loadAzureDevOpsWorkItems();\n        }\n      });\n  }\n  \n  /**\n   * Load work items from Azure DevOps for the selected iteration\n   */\n  loadAzureDevOpsWorkItems(): void {\n    this.loadingAzureDevOps = true;\n    this.azureDevOpsError = '';\n    \n    // First try to get the status counts directly from the backend proxy\n    this.azureDevOpsService.getWorkItemStatusCounts(this.selectedIterationPath)\n      .pipe(\n        catchError(error => {\n          console.error('Error loading status counts, falling back to work items:', error);\n          // Fall back to getting work items and counting them\n          return this.azureDevOpsService.getWorkItemsByIteration(this.selectedIterationPath)\n            .pipe(\n              map(workItems => {\n                // Process the work items to get counts\n                return this.azureDevOpsService.getWorkItemCounts(workItems);\n              }),\n              catchError(err => {\n                this.azureDevOpsError = 'Failed to load Azure DevOps work items. Please try again.';\n                console.error('Error loading Azure DevOps work items:', err);\n                return of({\n                  totalTasks: 0,\n                  devNew: 0,\n                  inProgress: 0,\n                  codeReview: 0,\n                  devComplete: 0,\n                  completed: 0,\n                  blocked: 0\n                });\n              })\n            );\n        }),\n        finalize(() => {\n          this.loadingAzureDevOps = false;\n        })\n      )\n      .subscribe(counts => {\n        // Store the counts\n        this.workItemCounts = counts;\n        \n        // Also store the work items if available\n        if (Array.isArray(counts.workItems)) {\n          this.azureDevOpsWorkItems = counts.workItems;\n        }\n        \n        // Update the summary data with the Azure DevOps counts\n        this.updateSummaryWithAzureDevOpsCounts();\n      });\n  }\n  \n  /**\n   * Update summary data with the counts from Azure DevOps\n   */\n  updateSummaryWithAzureDevOpsCounts(): void {\n    console.log('Updating summary with Azure DevOps counts:', this.workItemCounts);\n    \n    // Always create a new summary object with the latest counts to ensure reactivity\n    this.sprintSummary = {\n      totalTasks: this.workItemCounts.totalTasks || 0,\n      inProgress: this.workItemCounts.inProgress || 0,\n      completed: this.workItemCounts.completed || 0,\n      blocked: this.workItemCounts.blocked || 0,\n      completionPercentage: this.calculateCompletionPercentage()\n    };\n    \n    // Also update task status board with Azure DevOps data\n    this.updateTaskStatusBoardWithAzureDevOpsCounts();\n    \n    // Create tasksByStatus data for the pie chart\n    if (this.azureDevOpsWorkItems && this.azureDevOpsWorkItems.length > 0) {\n      // Group work items by state\n      const stateGroups = this.azureDevOpsWorkItems.reduce((acc, item) => {\n        const state = item.state || 'Unknown';\n        if (!acc[state]) {\n          acc[state] = [];\n        }\n        acc[state].push(item);\n        return acc;\n      }, {});\n      \n      // Convert to tasksByStatus format\n      this.tasksByStatus = Object.keys(stateGroups).map(state => ({\n        status: state,\n        count: stateGroups[state].length,\n        color: this.getStatusColor(state)\n      })).sort((a, b) => b.count - a.count);\n      \n      // Also update taskStatusBoard for compatibility\n      this.taskStatusBoard = [...this.tasksByStatus];\n    }\n  }\n  \n  /**\n   * Calculate completion percentage based on work item counts\n   */\n  calculateCompletionPercentage(): number {\n    const total = this.workItemCounts.totalTasks;\n    if (total === 0) return 0;\n    \n    const completed = this.workItemCounts.completed;\n    return Math.round((completed / total) * 100);\n  }\n  \n  /**\n   * Update task status board with counts from Azure DevOps\n   * This method is now only used for compatibility with other parts of the code\n   */\n  updateTaskStatusBoardWithAzureDevOpsCounts(): void {\n    // Update task status board with the latest data\n    this.loadTaskStatusBoard();\n  }\n  \n  /**\n   * Get assignee data as an array for display in the UI\n   * @returns Array of assignee data with counts\n   */\n  getAssigneeDistribution(): any[] {\n    if (!this.assigneeDistribution) {\n      return [];\n    }\n    \n    return Object.keys(this.assigneeDistribution).map(assignee => {\n      return {\n        name: assignee,\n        ...this.assigneeDistribution[assignee]\n      };\n    });\n  }\n\n  // Get total work items for percentage calculation\n  getTotalWorkItems(): number {\n    return this.tasksByType.reduce((total, item) => total + item.count, 0);\n  }\n\n  // Filter iterations based on user input\n  filterIterations(): void {\n    if (!this.iterationFilter || this.iterationFilter.trim() === '') {\n      this.filteredIterationPaths = [...this.availableIterationPaths];\n    } else {\n      const filterValue = this.iterationFilter.toLowerCase();\n      this.filteredIterationPaths = this.availableIterationPaths.filter(path => \n        path.toLowerCase().includes(filterValue)\n      );\n    }\n  }\n  \n  // Select an iteration path from the dropdown\n  selectIterationPath(path: string): void {\n    this.selectedIterationPath = path;\n  }\n} ","<div class=\"dashboard-container p-4\">\n  <div class=\"row mb-4\">\n    <div class=\"col-md-8\">\n      <div class=\"card\">\n        <div class=\"card-header d-flex justify-content-between align-items-center\">\n          <h4 class=\"mb-0\">Sprint Overview</h4>\n          <div>\n            <div class=\"d-flex align-items-center\">\n              <div class=\"dropdown me-2\" style=\"max-width: 250px;\">\n                <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" id=\"iterationDropdown\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                  {{ selectedIterationPath || 'Select Iteration Path' }}\n                </button>\n                <ul class=\"dropdown-menu iteration-dropdown\" aria-labelledby=\"iterationDropdown\" style=\"max-height: 300px; overflow-y: auto;\">\n                  <li>\n                    <div class=\"px-3 py-2\">\n                      <input \n                        type=\"text\" \n                        class=\"form-control form-control-sm\" \n                        placeholder=\"Filter iterations...\" \n                        [(ngModel)]=\"iterationFilter\"\n                        (input)=\"filterIterations()\">\n                    </div>\n                  </li>\n                  <li><hr class=\"dropdown-divider\"></li>\n                  <li *ngFor=\"let iteration of filteredIterationPaths\">\n                    <a class=\"dropdown-item\" href=\"javascript:void(0)\" (click)=\"selectIterationPath(iteration)\">{{ iteration }}</a>\n                  </li>\n                </ul>\n              </div>\n              <button class=\"btn btn-primary btn-sm me-2\" (click)=\"loadIterationData()\">\n                <i class=\"bi bi-search\"></i> Search\n              </button>\n              <button class=\"btn btn-outline-primary btn-sm\" (click)=\"reload()\">\n                <i class=\"bi bi-arrow-clockwise\"></i> Refresh\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"card-body\">\n          <div *ngIf=\"loading.sprint\" class=\"text-center py-4\">\n            <div class=\"spinner-border text-primary\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n          \n          <div *ngIf=\"error.sprint\" class=\"alert alert-danger\">\n            {{ error.sprint }}\n          </div>\n          \n          <div *ngIf=\"!loading.sprint && !error.sprint && sprintOverview\">\n            <h2 class=\"sprint-title\">{{ sprintOverview.sprintName }}</h2>\n            <div class=\"d-flex justify-content-between mt-3\">\n              <div>\n                <p class=\"text-muted mb-1\">Start Date</p>\n                <p class=\"fw-bold\">{{ sprintOverview.startDate | date:'mediumDate' }}</p>\n              </div>\n              <div>\n                <p class=\"text-muted mb-1\">End Date</p>\n                <p class=\"fw-bold\">{{ sprintOverview.endDate | date:'mediumDate' }}</p>\n              </div>\n              <div>\n                <p class=\"text-muted mb-1\">Days Remaining</p>\n                <p class=\"fw-bold days-remaining\">{{ sprintOverview.daysRemaining }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"col-md-4\">\n      <div class=\"card\">\n        <div class=\"card-header\">\n          <h4 class=\"mb-0\">AI Assistant</h4>\n        </div>\n        <div class=\"card-body d-flex flex-column\" style=\"height: 350px;\">\n          <!-- Chat Messages -->\n          <div class=\"chat-messages flex-grow-1 overflow-auto mb-3\">\n            <div *ngIf=\"chatMessages.length === 0\" class=\"text-center py-4\">\n              <p class=\"text-muted\">Ask me anything about your project or tasks.</p>\n              <p class=\"text-muted small\">Examples:</p>\n              <ul class=\"text-muted small text-start\">\n                <li>How many tasks are in the current sprint?</li>\n                <li>Show me tasks assigned to John</li>\n                <li>Assign task #1234 to Sarah</li>\n              </ul>\n            </div>\n            \n            <div *ngFor=\"let msg of chatMessages\" class=\"message mb-2\"\n                 [ngClass]=\"{'user-message': msg.role === 'user', 'assistant-message': msg.role === 'assistant'}\">\n              <div class=\"message-content\">\n                <div class=\"message-text\">{{ msg.content }}</div>\n                <div class=\"message-time small text-muted\">{{ msg.timestamp | date:'shortTime' }}</div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- Chat Input -->\n          <div class=\"chat-input\">\n            <div class=\"input-group\">\n              <input type=\"text\" class=\"form-control\" \n                     placeholder=\"Type your message...\" \n                     [(ngModel)]=\"currentMessage\"\n                     (keyup.enter)=\"sendChatMessage()\">\n              <button class=\"btn btn-primary\" type=\"button\" (click)=\"sendChatMessage()\">\n                <i class=\"bi bi-send\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Task Distribution Cards -->\n  <div class=\"card mb-4\">\n    <div class=\"card-header\">\n      <h4 class=\"mb-0\">Task Distribution by Status</h4>\n    </div>\n    <div class=\"card-body\">\n      <!-- Loading indicator -->\n      <div *ngIf=\"loadingTaskDetails\" class=\"text-center py-4\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n          <span class=\"visually-hidden\">Loading work item data...</span>\n        </div>\n        <p class=\"mt-2\">Fetching real-time work item counts from API...</p>\n      </div>\n      \n      <!-- Error message -->\n      <div *ngIf=\"taskDetailsError\" class=\"alert alert-danger\">\n        {{ taskDetailsError }}\n      </div>\n      \n      <!-- No data message -->\n      <div *ngIf=\"!loadingTaskDetails && (!taskStatusBoard || taskStatusBoard.length === 0) && !taskDetailsError\" class=\"text-center py-4\">\n        <p class=\"text-muted\">No work item state data available. Please select an iteration and click Search.</p>\n      </div>\n      \n      <!-- Task Status Cards -->\n      <div *ngIf=\"!loadingTaskDetails && taskStatusBoard && taskStatusBoard.length > 0\" class=\"row\">\n        <div *ngFor=\"let status of taskStatusBoard\" class=\"col-md-2 mb-3\">\n          <div class=\"card task-state-card h-100\" [style.background-color]=\"status.color\">\n            <div class=\"card-body text-center text-white p-3\">\n              <h1 class=\"mb-0 display-4 fw-bold\">{{ status.count }}</h1>\n              <p class=\"mb-0 small status-label\">{{ status.status }}</p>\n              <p class=\"mb-0 small status-label\">Work Items</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <!-- Task Distribution by Type -->\n  <div class=\"card mb-4\">\n    <div class=\"card-header\">\n      <h4 class=\"mb-0\">Work Items by Type</h4>\n    </div>\n    <div class=\"card-body\">\n      <!-- Type Distribution Cards -->\n      <div *ngIf=\"!loadingTaskDetails && tasksByType && tasksByType.length > 0\" class=\"row\">\n        <div *ngFor=\"let typeItem of tasksByType\" class=\"col-md-3 mb-3\">\n          <div class=\"card task-type-card h-100\" [style.border-left-color]=\"typeItem.color\">\n            <div class=\"card-body p-3\">\n              <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                <h5 class=\"mb-0 card-title\">{{ typeItem.type }}</h5>\n                <span class=\"badge rounded-pill\" [style.background-color]=\"typeItem.color\">{{ typeItem.count }}</span>\n              </div>\n              <div class=\"progress\">\n                <div class=\"progress-bar\" [style.width.%]=\"(typeItem.count / getTotalWorkItems()) * 100\" \n                     [style.background-color]=\"typeItem.color\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- No data message -->\n      <div *ngIf=\"!loadingTaskDetails && (!tasksByType || tasksByType.length === 0) && !taskDetailsError\" class=\"text-center py-4\">\n        <p class=\"text-muted\">No work item type data available.</p>\n      </div>\n    </div>\n  </div>\n</div> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}